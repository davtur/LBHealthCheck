<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <ui:composition template="/template.xhtml">
        <ui:define name="title">
            <h:outputText value="#{configMapController.getKey('CreateStatsTakenTitle')}"></h:outputText>
        </ui:define>
        <ui:define name="body">
            <div align="center">
                <h:form id="statsTakenForm1">
                    <f:param name="trace" value="true" />
                    <p:panel id="statsTakenPanel1">
                        <h:panelGrid columns="3" width="600px">
                            <h:outputLabel value="#{configMapController.getKey('CreateStatsTakenLabel_dateRecorded')}" for="dateRecorded" />
                            <h:outputLabel value="#{configMapController.getKey('CreateStatsTakenLabel_trainerComments')}" for="trainerComments" />
                            <h:outputLabel value="#{configMapController.getKey('CreateStatsTakenLabel_customerId')} #{statsTakenController.selected.customerId}" for="customerId" />
                            <p:calendar id="dateRecorded" value="#{statsTakenController.selected.dateRecorded}" mode="inline" >


                                <p:ajax event="dateSelect" listener="#{statsTakenController.handleDateSelect}" update=":menuForm:growl"  />

                            </p:calendar> 
                            <h:inputTextarea id="trainerComments" cols="32" rows="12" value="#{statsTakenController.selected.trainerComments}" title="#{configMapController.getKey('CreateStatsTakenTitle_trainerComments')}" required="true" requiredMessage="#{configMapController.getKey('CreateStatsTakenRequiredMessage_trainerComments')}"/>
                            <h:panelGrid>
                                <h:selectOneMenu id="customerId" value="#{statsTakenController.selected.customerId}" title="#{configMapController.getKey('CreateStatsTakenTitle_customerId')}" required="true" converter="customerConverter" requiredMessage="#{configMapController.getKey('CreateStatsTakenRequiredMessage_customerId')}">
                                    <f:selectItems  itemLabel="#{listItem.firstname} #{listItem.lastname}" itemValue="#{listItem}" value="#{customersController.customersAvailableSelectOneObject}" var="listItem"/>
                                    <p:ajax update=":statsTakenForm1:statsTakenPanel1"  listener="#{statsTakenController.handleUserChange}" />
                                </h:selectOneMenu>
                                <h:outputLabel value="Actions" />
                                <h:commandButton action="#{statsTakenController.create}" value="#{configMapController.getKey('CreateStatsTakenSaveLink')}" style="width:100%"/>

                                <h:commandButton action="#{statsTakenController.createAndReturnToList}" value="#{configMapController.getKey('CreateStatsTakenSaveAndReturnLink')}" style="width:100%"/>
                                <h:commandButton action="#{statsTakenController.discard}" value="Discard" style="width:100%"/>
                            </h:panelGrid>
                        </h:panelGrid>

                    </p:panel>
                    <p:panel id="statsPanel2">


                        <p:dataList value="#{statsTakenController.selected.statCollection}" var="stats" itemType="disc">
                            <p:panelGrid columns="2">
                                <p:outputLabel value="#{stats.statType.name}"  />
                                <p:inputText  value="#{stats.value}" title="#{stats.statType.description}" required="true" requiredMessage="#{configMapController.getKey('CreateStatRequiredMessage_value')}"/>
                            </p:panelGrid>
                        </p:dataList>



                    </p:panel>
                </h:form>
            </div>
        </ui:define>
    </ui:composition>

</html>
