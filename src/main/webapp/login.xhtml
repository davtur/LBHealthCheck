<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

    <h:head>
        <f:facet name="first">
            <meta http-equiv="X-UA-Compatible" content="IE=edge" />
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
            <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
            <meta name="apple-mobile-web-app-capable" content="yes" />
        </f:facet>
        <title>Pure Fitness Manly</title>

        <f:metadata>
            <f:viewAction action="#{loginBean.checkAlreadyLoggedin}"  immediate="true" />
        </f:metadata>
        <ui:insert name="head" />
    </h:head>


    <h:body styleClass="login-body">

        <p:tooltip />
        <p:growl id="growl" showDetail="true"/>

        <div class="login-topbar">
            <h:link outcome="/index" styleClass="logo">
                <p:graphicImage name="images/logo.png"  />
            </h:link>
        </div> 
        <h:form id="mainLoginForm">
            <div class="login-panel ui-fluid">
                <div class="ui-g">
                    <div class="ui-g-12 login-icon-container">
                        <p:graphicImage styleClass="login-icon" name="images/icon-login.png" library="california-layout" />
                    </div>
                    <div class="ui-g-12 ui-lg-12 ui-md-12 logo-container">
                        <span class="login-summary">Pure Fitness Manly</span>
                        <div class="login-detail">
                            <span>Welcome, please use the form to sign-in.</span>
                        </div>
                    </div>
                    <div class="ui-g-12 ui-lg-12 ui-md-12">
                        <p:inputText id="usernameText" value="#{loginBean.username}"  placeholder="Username/email"  title="Please enter your username or your email address in this box." >
                            <p:ajax event="change" update=":loginForm" />
                        </p:inputText>   
                    </div>
                    <div class="ui-g-12 ui-lg-12 ui-md-12">
                        <p:password id="passText" value="#{loginBean.password}"  placeholder="Password" feedback="false" title="Please enter your password in this box."/>
                    </div>
                    <div class="ui-g-12 ui-lg-12 ui-md-12 chkbox-container">
                        <p:selectBooleanCheckbox id="remember-me" />
                        <p:outputLabel for="remember-me" value="Remember Me" />
                        <p:commandLink id="resetPass" value="Reset Password" ajax="false"  action="#{loginBean.resetPassword}" update=":growl" title="If you have forgotten your username or password enter your email or username above then click the password reset button."/>
                    </div>
                    <div class="ui-g-12">
                        <div class="ui-g-4 ui-lg-4 ui-md-4 button-container">
                            <p:commandButton id="standard" value="Sign in" styleClass="Fs16" actionListener="#{loginBean.login}"  update=":growl" title="Click this button to login after entering your username and password above."/> 
                        </div>
                        <div class="ui-g-4 ui-lg-4 ui-md-4 button-container">
                            
                            <img src="https://graph.facebook.com/v2.8/#{loginBean.facebookId}/picture" hidden="#{empty loginBean.facebookId}" class="img-circular" title="This is the currently logged in facebook profile."/>
                        
                        </div>
                        <div class="ui-g-4 ui-lg-4 ui-md-4 button-container">
                            <p:commandButton id="facebook" icon="fa fa-facebook-f" widgetVar="fbLogin" onclick="PF('fbLogin').disable()" styleClass="loginButtonFacebook" value="Sign in with Facebook" actionListener="#{facebookLoginBean.facebookRedirect}" title="Click this button to login with your facebook account. Note you must use the same email address with pure fitness and facebook."/>
                        </div>
                    </div>
                  
                    <div class="ui-g-12 ui-lg-12 ui-md-12">
                        <p:messages showDetail="true"/>
                    </div>
                </div>
            </div> 
        </h:form>
        <h:form id="loginForm">
            <h:outputText value="#{facebookLoginBean.userFromSession}"></h:outputText>
        </h:form>
        <h:outputStylesheet name="css/layout-#{guestPreferences.theme}.css" library="california-layout" />
        <h:outputStylesheet library="css" name="customisations.css"/>
    </h:body>
</html>
