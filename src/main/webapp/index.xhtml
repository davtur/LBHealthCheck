<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="/WEB-INF/template.xhtml">
    <ui:define name="title">
        <h:outputText  value="My Statistics"></h:outputText>

    </ui:define>
    <ui:define name="body">
        <div class="layout-portlets-box">
            <h:form id="myStatsForm">
                <div class="ContainerIndent">
                <!--  <p:panel class="customerDetailsPanel parentOfUploadPhoto profilePictureContainer" header="#{configMapController.getKey('ListCustomersTitle_ProfilePic')}" >

                      <p:graphicImage id="photo1"  value="#{customersController.selected.profileImage.imageStream}"  cache="false" class="profilePicture"/>
                      <p:commandButton  id="photoUploadButton" ajax="true"  onclick="PF('uploadPhotoDialogueWidget').show();" update=":growl @(.parentOfUploadPhoto) "    value="#{configMapController.getKey('EditCustomersUploadPhotoButton')}" immediate="true"/>

                  </p:panel>
                  <p:panel id ="contentFlowPanel"  header="My Pictures : #{customerImagesController.imageListSize} loaded." >-->
                    <h1  class="BigTopic">#{configMapController.getKey('MyStats_MyPicturesHeader')} (<h:outputText id="heading1"  styleClass="myStatsCarousel parentOfUploadPhoto" value="#{customerImagesController.imageListSize}" />)</h1>
                    <p:contentFlow id="mainCarousel" styleClass="myStatsCarousel parentOfUploadPhoto"  value="#{customerImagesController.images}" var="photo"   widgetVar="contentFlowWidget" >

                        <p:graphicImage  styleClass="content" value="#{customerImagesController.image}" onclick="clickFlow(this, event)" title="#{configMapController.getKey('ListMyStats_photoTakenText')} #{photo.formattedDate}" alt="#{customerImagesController.dynamicTitle}" >
                            <f:param name="imageId" value="#{photo.id}"/>
                        </p:graphicImage>

                        <div class="caption">#{photo.formattedDate}</div>
                        <div class="hiddenId" style="display: none;">#{photo.id}</div>
                    </p:contentFlow>
                    <p:contextMenu  for="mainCarousel"  >
                        <p:menuitem value="Refresh" update="@(.parentOfUploadPhoto)  "  />
                        <p:separator/>
                        <p:menuitem value="Add New" onclick="PF('uploadPhotoDialogueWidget').show()" />
                        <p:menuitem value="Delete" oncomplete="removePicture([{name:'selectedImage', value: $('.item.active div.hiddenId').text()}]);" />
                    </p:contextMenu>
                    <p:remoteCommand name="removePicture" actionListener="#{customerImagesController.removePicture}" update=":growl :myStatsForm:mainCarousel :myStatsForm:heading1"/>
                    <!-- </p:panel> -->


                </div>
                <p:remoteCommand  actionListener="#{customerImagesController.carouselImageClicked}"  name="carouselClicked" immediate="true"/>

                <script>
                    function clickFlow(item, e) {
                        if ($(item).parent().hasClass('active')) {
                            e.stopImmediatePropagation();
                        }
                    }
                </script>
                <!--  <p:panel >
                     <p:lightBox styleClass="imagebox" height="400">
                         <ui:repeat var="image" value="#{customerImagesController.images}" >
                             <h:outputLink value="#{customerImagesController.image}"  >
                                 <p:graphicImage value="#{customerImagesController.image}" >
                                                
                                 <f:param name="imageId" value="#{image.id}"/>
                                    </p:graphicImage>
                             </h:outputLink>
                         </ui:repeat>
 
 
 
 
 
                     </p:lightBox>
 
                 </p:panel>-->


                   <!--     <p:carousel class="myStatsCarousel parentOfUploadPhoto" widgetVar="myStatsCarouselWidget" id="photoGalleryCarousel" value="#{customerImagesController.images}" headerText="#{configMapController.getKey('ListMyStats_GalleryHeader')}" var="image" numVisible="6" autoPlayInterval="0" effectDuration="2000" effect="elasticBoth" circular="false" >-->
                       <!--  <p:contentFlow class="myStatsCarousel parentOfUploadPhoto" value="#{customerImagesController.images}" var="image">
                             <f:facet name="header" >
                                  <p:commandButton onclick="PF('myStatsCarouselWidget').startAutoplay()"   icon="fa fa-play-circle-o" /> 
                                  <p:commandButton onclick="PF('myStatsCarouselWidget').stopAutoplay()" icon="fa fa-stop" />
  
  
                              </f:facet>
                              <p:panel class="customerDetailsPanel"  header="#{configMapController.getKey('ListMyStats_photoTakenText')}  #{image.formattedDate}">
                            <p:graphicImage styleClass="content" value="#{customerImagesController.dynamicImage}"  title="#{configMapController.getKey('ListMyStats_photoTakenText')} #{image.formattedDate}" alt="#{customerImagesController.dynamicTitle}">
                                <f:param name="imageid" value="#{image.id}"/>
                                <f:param name="imagedescid" value="#{image.id}"/>
                                <f:param name="imagetitleid" value="#{image.id}"/>
                            </p:graphicImage>
                            <div class="caption">#{image.formattedDate}</div>-->
                <!--      <h:panelGrid columns="1">
                        <p:commandButton update="@(.parentOfUploadPhoto) :growl"  value="Delete">

                            <f:setPropertyActionListener value="#{image}" target="#{customerImagesController.selectedForDeletion}" />
                        </p:commandButton>
                    </h:panelGrid>
                </p:panel>
                </p:carousel>
            </p:contentFlow>-->

                          <!--  <p:galleria widgetVar="galleriaWidget" var="image" value="#{customerImagesController.images}" panelWidth="667" panelHeight="500" showCaption="true" effect="#{customerImagesController.effect}" effectSpeed="1000">

                                <p:graphicImage value="#{customerImagesController.dynamicImage}"  title="#{configMapController.getKey('ListMyStats_photoTakenText')} #{image.formattedDate}" alt="#{customerImagesController.dynamicTitle}">
                                    <f:param name="imageid" value="#{image.id}"/>
                                    <f:param name="imagedescid" value="#{image.id}"/>
                                    <f:param name="imagetitleid" value="#{image.id}"/>
                                </p:graphicImage>

                            </p:galleria>
                        </p:panel>
                        <p:panel class="customerDetailsPanel" header="#{configMapController.getKey('ListMyStats_SelectedPic')}">
                            <h:panelGrid columns="1">
                                <p:graphicImage id="photo2" value="#{customerImagesController.selected.imageStream}" height="200px" cache="false" />
                                <p:commandButton  id="photoUploadButton2" ajax="true"  onclick="PF('uploadPhotoDialogueWidget').show();" update=":growl :uploadPhotoForm"   value="#{configMapController.getKey('EditCustomersUploadPhotoButton')}" immediate="true"/>
                            </h:panelGrid>-->

                <!--  <p:panel header="Photo Gallery" style="height: 500px">
                   <p:ring id="basic" value="#{customerImagesController.images}" var="image" easing="easeInOutCirc">
                       <p:column>
                #{image.formattedDate}
                 
                 <p:graphicImage value="#{customerImagesController.dynamicImage}"  title="This photo was taken on #{image.formattedDate}" width="200px"> 
                    <f:param name="imageid" value="#{image.id}"/>
                     </p:graphicImage>
                  <p:graphicImage value="#{customerImagesController.dynamicImage}"  title="This photo was taken on #{image.formattedDate}" alt="#{customerImagesController.dynamicTitle}">
                     <f:param name="imageid" value="#{image.id}"/>
                     <f:param name="imagedescid" value="#{image.id}"/>
                     <f:param name="imagetitleid" value="#{image.id}"/>
                 </p:graphicImage>
                <p:commandButton update=":form:carDetail" icon="ui-icon-search" title="View" oncomplete="PF('carDialog').show();">
                      <f:setPropertyActionListener value="#{image}" target="#{ringView.selectedCar}" />
                  </p:commandButton>
             </p:column>
         </p:ring>
     </p:panel>-->


            </h:form>
            <h:form>


                <h1 class="BigTopic">#{configMapController.getKey('ListMyStats_StatsPanelHeader')}</h1>
                <p:dataList  value="#{chartController.modelList}"  var="chart" id="chartsList"  styleClass="myStatsChartsDatalist"
                             paginator="false" rows="10"  
                             paginatorTemplate="{PreviousPageLink} {CurrentPageReport} {NextPageLink} {RowsPerPageDropdown}" 
                             rowsPerPageTemplate="5,10,15" 
                             type="none">
                    <div class="EmptyBox10"></div>
                    <p:chart type="line" styleClass="chartClass"  model="#{chart}"/>
                </p:dataList>

            </h:form>
        </div>
        <ui:include src="uploadPhoto.xhtml"/>
    </ui:define>
</ui:composition>



