
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:p="http://primefaces.org/ui" >


    <p:dialog header="#{configMapController.getKey('BookingDialogueHeader')}" widgetVar="bookingDialog" modal="false"  responsive="true" appendTo="@(body)" resizable="true">
        <h:form id="bookingForm" styleClass="bookingFormUpdate ">


            <div class="ui-g">



                <div class="ui-g TimetableTile border-box">
                    <div class="ui-g-12">
                        <h2 class=" FontBold ">  #{sessionTimetableController.bookingButtonSessionHistory.sessionTemplate.sessionTitle} </h2> 
                    </div>
                    <div class="ui-g-12">
                        <h:outputText value="#{sessionTimetableController.bookingButtonSessionHistory.sessiondate}" styleClass=" Fs18 FontBold blue">
                            <f:convertDateTime pattern="EEEE h:mm a" />
                        </h:outputText>

                    </div>
                    <div class="ui-g-12">
                        <div class="ui-g-2">
                            <div class="ui-g-12">
                                <p:graphicImage value="#{customerImagesController.imageThumbnail}" width="55px">
                                    <f:param name="imageId" value="#{sessionTimetableController.bookingButtonSessionHistory.sessionTemplate.trainerId.profileImage.id}"/>
                                </p:graphicImage>

                            </div>
                            <div class="ui-g-12">
                                <p:commandButton id="mapsBtn" styleClass="MarRight5" value="#{configMapController.getKey('Timetable_MapsButtonTitle')}" type="button" />


                                <p:overlayPanel  for="mapsBtn" hideEffect="fade" dynamic="false" styleClass="timetableGmap" >
                                    <p:gmap styleClass="BorderedBox" center="#{sessionTimetableController.bookingButtonSessionHistory.sessionTemplate.sessionLocationGps}" zoom="16" model="#{sessionTimetableController.bookingButtonSessionHistory.sessionTemplate.simpleModel}" type="HYBRID" style="width:100%;height:400px" />

                                </p:overlayPanel>
                            </div>
                        </div>
                        <div class="ui-g-10">


                            <div class="ui-g-12">
                                <span class="DispBlock " ><font class="Fs14 FontBold black">Trainer: </font> #{sessionTimetableController.bookingButtonSessionHistory.sessionTemplate.trainerId.firstname}</span></div>
                            <div class="ui-g-12">
                                <span class="DispBlock " ><font class="Fs14 FontBold black">Duration: </font> #{sessionTimetableController.bookingButtonSessionHistory.sessionTemplate.durationMinutes} #{configMapController.getKey('Timetable_MinutesLabel')}</span></div>
                            <div class="ui-g-12">
                                <span class="DispBlock " ><font class="Fs14 FontBold black">Location: </font> #{sessionTimetableController.bookingButtonSessionHistory.sessionTemplate.sessionLocationLabel}</span></div>
                            <div class="ui-g-12">
                               
                              <span class="DispBlock " ><font class="Fs14 FontBold black">   
                                            <h:outputText  rendered="#{! empty sessHist.sessionBookingsCollection.size() and (sessHist.sessionTemplate.sessionTimetableMaxSize - sessHist.sessionBookingsCollection.size()) le 10}" value="Places Remaining:"/>
                                        </font>

                                        <h:outputText  rendered="#{! empty sessHist.sessionBookingsCollection.size() and (sessHist.sessionTemplate.sessionTimetableMaxSize - sessHist.sessionBookingsCollection.size()) le 10}" value="#{sessHist.sessionTemplate.sessionTimetableMaxSize - sessHist.sessionBookingsCollection.size()}"/>

                                </span></div>
                            <div class="ui-g-12">
                                <span class="DispBlock " ><font class="Fs14 FontBold black"><h:outputText styleClass=" Fs18 FontBold red" rendered="#{!sessionTimetableController.bookingButtonSessionHistory.sessionTemplate.sessionTypesId.postPaid}" value="Price:" /> </font> 
                                    <h:outputText value="#{sessHist.sessionTemplate.sessionCasualRate}" rendered="#{empty  facesContext.externalContext.remoteUser and !sessionTimetableController.bookingButtonSessionHistory.sessionTemplate.sessionTypesId.postPaid}">
                                        <f:convertNumber type="currency" currencySymbol="$" locale="au-AU" />
                                    </h:outputText>
                                    <h:outputText value="#{sessHist.sessionTemplate.sessionMembersRate}" rendered="#{not empty  facesContext.externalContext.remoteUser and !sessionTimetableController.bookingButtonSessionHistory.sessionTemplate.sessionTypesId.postPaid}" >
                                        <f:convertNumber type="currency" currencySymbol="$" locale="au-AU" />
                                    </h:outputText>
                                </span>
                            </div>
                        </div>   
                        <div class="EmptyBox10"></div>
                    </div>

                </div>
            </div>
            <div class="Seperator"></div>
            <div class="ui-g-12">
                <h:outputText style="max-width: 300" value="#{sessionTimetableController.bookingButtonSessionHistory.sessionTemplate.comments}"/>


            </div>
            <div class="Seperator"></div>
            <div class="ui-g-12">

                <h:outputText styleClass=" Fs18 FontBold red" rendered="#{sessionTimetableController.sessionAlreadyBooked}" value="You have already booked this session. Please cancel the booking if you can't make it." />
                <p:messages showDetail="true"/>
            </div>

            <div class="ui-g-12">

                <h:outputText styleClass=" Fs18 FontBold red" rendered="#{!sessionTimetableController.bookingButtonSessionHistory.sessionTemplate.sessionTypesId.postPaid}" value="NOTE: This Session is not included in monthly membership. " />

            </div>
            <div class="EmptyBox10">

            </div>




            <div class="ui-g-12">
                <div class="ui-g-3">
                    <p:commandButton icon="ui-icon-check fa fa-check white Fs14" id="dialogueSave" disabled="#{sessionTimetableController.sessionAlreadyBooked}"  actionListener="#{sessionTimetableController.purchaseSession}"  value="#{configMapController.getKey('BookingFormPurchaseSessionLink')}" update="@(.bookingFormUpdate) :growl "/>                
                </div><div class="ui-g-3">
                    <p:commandButton icon=" fa fa-times-circle white Fs14" id="dialogueDiscard" onclick=" PF('bookingDialog').hide()"  actionListener="#{customersController.cancelCreateDialogue}" value="#{configMapController.getKey('CancelSignupLink')}" update=":growl"/>                
                </div><div class="ui-g-3">
                    <p:commandButton icon="ui-icon-check fa fa-check white Fs14" id="dialogueCancel" disabled="#{!sessionTimetableController.sessionAlreadyBooked}"  actionListener="#{sessionTimetableController.cancelSession}"  value="#{configMapController.getKey('BookingFormCancelSessionLink')}" update="@(.bookingFormUpdate) :growl "/>                
                </div><div class="ui-g-3">
                    <p:commandButton icon="ui-icon-check fa fa-check white Fs14" id="AdminView" rendered="#{customersController.isUserInRole('ADMIN') ||customersController.isUserInRole('DEVELOPER') }"    value="#{configMapController.getKey('BookingFormAdminViewLink')}" update="@(.bookingFormUpdate) :growl "/>                
                    <p:overlayPanel id="adminOverlay" for="AdminView" hideEffect="fade" dynamic="true"  rendered="#{customersController.isUserInRole('ADMIN') ||customersController.isUserInRole('DEVELOPER') }"  style="width:200px" >
                        <div class="ui-g">
                            <div class="ui-g-12 Fs14 FontBold black">
                                <h:outputText value="#{configMapController.getKey('BookingFormAdminViewLink_Title')}"/>
                            </div>
                            <p:repeat  value="#{sessHist.sessionBookingsCollection}" var="sessBook"  >
                                <div class="ui-g-4">
                                    <p:graphicImage value="#{customerImagesController.imageThumbnail}" width="55px">
                                        <f:param name="imageId" value="#{sessBook.customerId.profileImage.id}"/>
                                    </p:graphicImage>
                                </div>
                                <div class="ui-g-8">
                                    <h:outputText value="#{sessBook.customerId.firstname} #{sessBook.customerId.lastname}"/>
                                </div>
                            </p:repeat>
                        </div>
                    </p:overlayPanel>
                </div>
            </div>


        </h:form>
    </p:dialog>



</ui:composition>
<!--<p> Generated from template ( JSF_from_entity_wizard/StandardJSF/list.ftl  )- Dave 18th July 2015 </p>-->

