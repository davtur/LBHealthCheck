
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition  xmlns="http://www.w3.org/1999/xhtml"
                 xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                 xmlns:h="http://xmlns.jcp.org/jsf/html"
                 xmlns:f="http://xmlns.jcp.org/jsf/core"
                 xmlns:p="http://primefaces.org/ui" >

    <!--<p:log />--> 
    <p:dialog id="createPaymentDialogue"  closable="true"  appendTo="@(body)"
              header="#{configMapController.getKey('AddPaymentTitle')}" widgetVar="createPaymentDialogueWidget"> 
        <h:form id="createPayment">    
            <p:panelGrid id="addPaymentGrid1" columns="4">
                <p:outputLabel value="#{configMapController.getKey('AddPaymentLabel_debitdate')}" for="debitDate" />
                <p:calendar id="debitDate" pattern="dd MMM yyyy" value="#{ezidebit.paymentDebitDate}" title="#{configMapController.getKey('AddPaymentTitle_debitdate')}" required="true" requiredMessage="#{configMapController.getKey('AddPaymentRequiredMessage_debitdate')}" >
                    <p:ajax />
                </p:calendar>
                <p:outputLabel value="#{configMapController.getKey('AddPaymentLabel_paymentAmount')}" for="payAmount" />
                <p:inputText id="payAmount" value="#{ezidebit.paymentAmountInCents}" title="#{configMapController.getKey('AddPaymentTitle_paymentAmount')}" required="true" requiredMessage="#{configMapController.getKey('AddPaymentRequiredMessage_paymentAmount')}">
                    <f:convertNumber  minFractionDigits="2"/>
                </p:inputText>
            </p:panelGrid>
            <div class="ui-g-4">
                <p:selectOneMenu   converter="itemControllerConverter" value="#{itemsController.selected}" label="Payment Description" >
                    <f:selectItems value="#{itemController.combinedPlansAndItems}"  var="item" itemLabel="#{item.itemName}"  itemValue="#{item}"/>
                    <p:ajax />
                </p:selectOneMenu>
            </div>

            <p:panel>
                <p:commandButton id="createPaymentdialogueSave"  oncomplete="PF('createPaymentDialogueWidget').hide();"  actionListener="#{ezidebit.addSinglePayment}" value="#{configMapController.getKey('AddPaymentSaveLink')}" update=":growl :tv:paymentsForm "/>                
                <p:commandButton id="createPaymentdialogueDiscard" onclick="PF('createPaymentDialogueWidget').hide()"  value="#{configMapController.getKey('AddPaymentDiscardLink')}" update=":growl"/>                
            </p:panel>     
        </h:form>
    </p:dialog>
</ui:composition> 


