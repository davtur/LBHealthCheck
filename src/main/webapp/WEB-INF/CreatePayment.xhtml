
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition  xmlns="http://www.w3.org/1999/xhtml"
                 xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                 xmlns:h="http://xmlns.jcp.org/jsf/html"
                 xmlns:f="http://xmlns.jcp.org/jsf/core"
                 xmlns:p="http://primefaces.org/ui" >

    <!--<p:log />--> 
    <p:dialog id="createPaymentDialogue"  closable="true"  appendTo="@(body)"
              header="#{configMapController.getKey('AddPaymentTitle')}" widgetVar="createPaymentDialogueWidget"> 
        <h:form id="createPayment">    
            <div class="ui-g">
                <div class="ui-g-12">
                    <div class="ui-g-1">
                        <p:outputLabel value="#{configMapController.getKey('AddPaymentLabel_debitdate')}" for="debitDate" />
                    </div>
                    <div class="ui-g-5">
                        <p:calendar id="debitDate" pattern="dd MMM yyyy" value="#{ezidebit.paymentDebitDate}" title="#{configMapController.getKey('AddPaymentTitle_debitdate')}" required="true" requiredMessage="#{configMapController.getKey('AddPaymentRequiredMessage_debitdate')}" >
                            <p:ajax update="@form"/>
                        </p:calendar>
                    </div>
                    <div class="ui-g-1">
                        <p:outputLabel value="Product"  />
                    </div>
                    <div class="ui-g-5">
                        <p:selectOneMenu  valueChangeListener="#{planController.productChange}" converter="planControllerConverter" placeholder="Select Product" value="#{planController.selected}" label="Payment Description"  >
                           <f:selectItem itemLabel="Select A Product"   noSelectionOption="true"   itemDisabled="true"/>
                            <f:selectItems value="#{planController.combinedPlansAndItems}"  var="plan" itemLabel="#{plan.planName}"  itemValue="#{plan}"/>
                            <p:ajax update="@form"/>
                        </p:selectOneMenu>
                    </div>
                </div>
                <div class="ui-g-12">
                    <div class="ui-g-1">
                        <p:outputLabel value="#{configMapController.getKey('AddPaymentLabel_paymentAmount')}" for="payAmount" />
                    </div>
                    <div class="ui-g-5">
                        <p:inputText id="payAmount" value="#{ezidebit.paymentAmountInCents}" title="#{configMapController.getKey('AddPaymentTitle_paymentAmount')}" required="true" requiredMessage="#{configMapController.getKey('AddPaymentRequiredMessage_paymentAmount')}">
                            <f:convertNumber  minFractionDigits="2"/>
                        </p:inputText>
                    </div>
                    
                    <div class="ui-g-2">
                        <p:commandButton id="createPaymentdialogueSave"  oncomplete="PF('createPaymentDialogueWidget').hide();"  actionListener="#{ezidebit.addSinglePayment}" value="#{configMapController.getKey('AddPaymentSaveLink')}" update=":growl :tv:paymentsForm "/>                
                    </div>
                    <div class="ui-g-2">
                        <p:commandButton id="createPaymentdialogueDiscard" onclick="PF('createPaymentDialogueWidget').hide()"  value="#{configMapController.getKey('AddPaymentDiscardLink')}" update=":growl"/>                
                    </div>
                </div>
            </div>


        </h:form>
    </p:dialog>
</ui:composition> 


