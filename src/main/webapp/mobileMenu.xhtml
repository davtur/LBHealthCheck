<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:pm="http://primefaces.org/mobile">

    <f:view renderKitId="PRIMEFACES_MOBILE" />
    <h:head>
    </h:head>

    <h:body>
        <pm:page id="main" title="Pure Fitness Session" >

            <!-- Main View  -->
            <pm:header title="Pure Fitness Mobile"  swatch="b"/>
            <pm:content >  
                <h:form id="menuForm">  
                    <p:growl/>
                    <h3>Main Menu</h3>
                    <p:menu styleClass="ui-listview-inset ui-corner-all ui-group-theme-b">
                        <p:submenu label="Trainer" rendered="#{customersController.isUserInRole('TRAINER')}" >
                            <p:menuitem value="Log Training Sessions " action="#{sessionHistoryController.prepareCreateMobileReturnCreate}" icon="ui-icon-gear"/>
                            <p:menuitem value="Edit Training Sessions " url="/trainer/sessionHistory/EditSessionMobile.xhtml?faces-redirect=true" icon="ui-icon-gear"/>
                            <p:menuitem value="Log Customer Stats " action="#{statsTakenController.prepareCreateMobile}" icon="ui-icon-gear"/>
                            <p:menuitem value="Upload Photos" action="#{customerImagesController.prepareCreateMobile}" icon="ui-icon-gear"/>                           
                            <p:menuitem value="Customer Notes" action="/trainer/sessionHistory/ListCustomerNotes?faces-redirect=true" icon="ui-icon-info"/>
                            
                        </p:submenu>
                        <p:submenu label="User" >
                            <p:menuitem  value="My Profile" action="/myDetailsMobile.xhtml?faces-redirect=true"  icon="ui-icon-action"/>
                            <p:menuitem  value="Desktop Portal" action="/index.xhtml?faces-redirect=true"  icon="ui-icon-action"/>
                            <p:menuitem  value="Logout" action="#{customersController.logoutMobile}"  icon="ui-icon-action"/>
                        </p:submenu>
                    </p:menu>
                </h:form>
            </pm:content>
        </pm:page>

        <pm:page id="sessions"  title="Training Session" >

            <pm:header  swatch="b" title="Pure Fitness Mobile">
                <f:facet name="left"><p:button value="Back" icon="back" onclick="PrimeFaces.back()"/></f:facet>
            </pm:header> 
            <pm:content >            

                <h:form id="sessionsForm">  
                    <p:growl/>
                    <p:commandButton   ajax="false"   action="#{sessionHistoryController.createMobile}" value="#{configMapController.getKey('CreateSessionHistorySaveLink')}" />

                    <p:spacer height="10em" />

                    <pm:field>
                        <p:outputLabel for="sessiondate" value="#{configMapController.getKey('CreateSessionHistoryLabel_sessiondate')}" />
                        <p:calendar id="sessiondate" value="#{sessionHistoryController.selected.sessiondate}"  pattern="dd/MM/yyyy"/>
                    </pm:field>  
                    <pm:field>
                        <p:outputLabel for="sessiontime" value="Session Start Time:" />
                        <p:inputText id="sessiontime" value="#{sessionHistoryController.selectedSessionTime}" >
                            <f:convertDateTime  pattern="hhmm" />
                        </p:inputText>
                    </pm:field>  


                    <p:spacer height="10em" />

                    <pm:field>
                        <p:outputLabel for="sessionType" value="#{configMapController.getKey('CreateSessionHistoryLabel_sessionType')}" />
                        <p:selectOneMenu id="sessionType" value="#{sessionHistoryController.selected.sessionTypesId}" label="#{configMapController.getKey('CreateSessionHistoryLabel_sessionType')}"  converter="#{sessTypesConverter}" required="true" requiredMessage="#{configMapController.getKey('CreateSessionHistoryRequiredMessage_sessionType')}">
                            <f:selectItems value="#{sessionTypesController.itemsAvailableSelectOne}" />
                        </p:selectOneMenu>
                    </pm:field>

                    <p:spacer height="10em" />

                    <pm:field>
                        <p:outputLabel for="sessionType" value="#{configMapController.getKey('CreateSessionHistoryLabel_trainer')}" />
                        <p:selectCheckboxMenu id="trainer" filter="true" filterMatchMode="startsWith"  value="#{sessionHistoryController.trainers}" converter="#{custConverter}" label="#{configMapController.getKey('CreateSessionHistoryLabel_trainer')}"  >
                            <f:selectItems value="#{sessionHistoryController.activeTrainers}" var="cust" itemLabel="#{cust.firstname} #{cust.lastname}" itemValue="#{cust}"/>
                        </p:selectCheckboxMenu>
                    </pm:field>

                    <p:spacer height="10em" />
                    <pm:field>
                        <p:outputLabel for="comments" value="#{configMapController.getKey('CreateSessionHistoryLabel_comments')}" />
                        <p:inputTextarea id="comments" value="#{sessionHistoryController.selected.comments}"  />
                    </pm:field>
                    <p:spacer height="10em" />
                    <pm:field>
                        <p:outputLabel for="scroll" value="#{configMapController.getKey('CreateSessionHistoryLabel_picker')}" />
                        <p:selectCheckboxMenu  id="scroll" value="#{sessionHistoryController.attendingCustomers}"  converter="#{custConverter}" label="#{configMapController.getKey('CreateSessionHistoryLabel_picker')}">  
                            <f:selectItems value="#{sessionHistoryController.activeCustomers}" var="cust"  itemLabel="#{cust.firstname} #{cust.lastname}" itemValue="#{cust}" />  
                        </p:selectCheckboxMenu>
                    </pm:field>
                    <p:spacer height="10em" />
                    <p:spacer height="10em" />
                    <p:commandButton   ajax="false"   action="#{sessionHistoryController.createMobile}" value="#{configMapController.getKey('CreateSessionHistorySaveLink')}" />
                </h:form>
             
            </pm:content>

        </pm:page>

    </h:body>
</html>
