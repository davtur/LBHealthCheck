
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition template="/WEB-INF/template.xhtml" xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui" >


    <ui:define name="title">
        <h:outputText value="#{configMapController.getKey('ListSessionTimetableTitle')}"></h:outputText>
    </ui:define>
    <ui:define name="body">



        <h:form id="SessionTimetableListForm">





            <h:outputText escape="false" value="#{configMapController.getKey('ListSessionTimetableEmpty')}" rendered="#{sessionTimetableController.items.rowCount == 0}"/>
            <h:panelGroup >
                <p:dataTable  
                    id="datalist"  
                    editable="true" 
                    value="#{sessionTimetableController.items}" 
                    selection="#{sessionTimetableController.multiSelected}" 
                    rowKey="#{item.id}" 
                    filteredValue="#{sessionTimetableController.filteredItems}"  
                    widgetVar="sessionTimetableControllerTable" 
                    var="item"  

                    paginator="true" 
                    rows="50"  
                    paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"  
                    rowsPerPageTemplate="5,10,15,20,25,50,100" >
                    <f:facet name="header">


                        <p:commandButton rendered="#{sessionTimetableController.isUserInRole('ADMIN')}" id="createButton" icon="ui-icon-plus"   value="#{configMapController.getKey('Create')}" actionListener="#{sessionTimetableController.prepareCreate}" update=":SessionTimetableCreateForm" oncomplete="PF('SessionTimetableCreateDialog').show()"/>
                        <p:commandButton id="viewButton"   icon="ui-icon-search" value="#{configMapController.getKey('View')}" update=":SessionTimetableViewForm" oncomplete="PF('SessionTimetableViewDialog').show()"  actionListener="#{sessionTimetableController.setSelectedForEditing}" disabled="#{empty sessionTimetableController.multiSelected || sessionTimetableController.multiSelectedLength != 1}"/>
                        <p:commandButton rendered="#{sessionTimetableController.isUserInRole('ADMIN')}" id="editButton"   icon="ui-icon-pencil" value="#{configMapController.getKey('Edit')}" update=":SessionTimetableEditForm" oncomplete="PF('SessionTimetableEditDialog').show()" actionListener="#{sessionTimetableController.setSelectedForEditing}" disabled="#{empty sessionTimetableController.multiSelected || sessionTimetableController.multiSelectedLength != 1}"/>
                        <p:commandButton rendered="#{sessionTimetableController.isUserInRole('ADMIN')}" id="publishButton" icon="ui-icon-circle-plus"  value="#{configMapController.getKey('SessionTimetablePublish')}" actionListener="#{sessionTimetableController.publish}" update=":growl,datalist" disabled="#{empty sessionTimetableController.multiSelected || sessionTimetableController.multiSelectedLength lt 1}"/>
                        <p:commandButton rendered="#{sessionTimetableController.isUserInRole('ADMIN')}" id="unPublishButton" icon="ui-icon-circle-minus"  value="#{configMapController.getKey('SessionTimetableUnPublish')}" actionListener="#{sessionTimetableController.unPublish}" update=":growl,datalist" disabled="#{empty sessionTimetableController.multiSelected || sessionTimetableController.multiSelectedLength lt 1}"/>
                        <p:commandButton rendered="#{sessionTimetableController.isUserInRole('ADMIN')}" id="deleteButton" icon="ui-icon-trash"  value="#{configMapController.getKey('Delete')}" actionListener="#{sessionTimetableController.destroy}" update=":growl,datalist" disabled="#{empty sessionTimetableController.multiSelected || sessionTimetableController.multiSelectedLength != 1}"/>

                       <!-- <p:commandButton rendered="#{sessionTimetableController.isUserInRole('ADMIN')}" id="populateButton" icon="ui-icon-cog"  value="#{configMapController.getKey('Populate')}" actionListener="#{sessionTimetableController.populateSessions}" update=":growl,datalist" />-->

                        <p:spacer width="50"/>
                        <p:outputPanel>
                            <h:outputText value="Search all fields:" />
                            <h:inputText id="globalFilter" onkeyup="PF('sessionTimetableControllerTable').filter()" />
                        </p:outputPanel>
                    </f:facet>
                    <p:ajax event="rowEdit" listener="#{sessionTimetableController.onEdit}" update=":growl" oncomplete="PF('sessionTimetableControllerTable').filter()" />  
                    <p:ajax event="rowEditCancel" listener="#{sessionTimetableController.onCancel}" update=":growl"  oncomplete="PF('sessionTimetableControllerTable').filter()" />  
                    <p:ajax event="rowSelect"   update="createButton viewButton editButton deleteButton publishButton unPublishButton" listener="#{sessionTimetableController.onRowSelect}"/>
                    <p:ajax event="rowUnselect" update="createButton viewButton editButton deleteButton publishButton unPublishButton"/>
                    <p:ajax event="rowSelectCheckbox"   update="createButton viewButton editButton deleteButton publishButton unPublishButton" listener="#{sessionTimetableController.onRowSelect}"/>
                    <p:ajax event="rowUnselectCheckbox" update="createButton viewButton editButton deleteButton publishButton unPublishButton"/>
                    <p:ajax event="toggleSelect" update="createButton viewButton editButton deleteButton publishButton unPublishButton"/>
                    <p:column selectionMode="multiple" />
                    <p:column sortBy="#{item.id}" filterBy="#{item.id}" headerText="#{configMapController.getKey('ListSessionTimetableTitle_id')}"   >
                        <p:cellEditor> 
                            <f:facet name="output">
                                <h:outputText value="#{item.id}"/>
                            </f:facet>
                            <f:facet name="input">
                                <p:inputText value="#{item.id}" label="#{configMapController.getKey('ListSessionTimetableTitle_id')}" />
                            </f:facet>
                        </p:cellEditor> 


                    </p:column>
                    <p:column sortBy="#{item.sessionTimetableStatus}" filterBy="#{item.sessionTimetableStatus}" headerText="#{configMapController.getKey('ListSessionTimetableTitle_Status')}"   >
                        <p:cellEditor> 
                            <f:facet name="output">

                                <h:outputText value="Published" rendered="#{item.sessionTimetableStatus == 0}"/>
                                <h:outputText value="Hidden" rendered="#{item.sessionTimetableStatus == 1}"/>


                            </f:facet>
                            <f:facet name="input">
                                <p:selectOneMenu id="status"  value="#{item.sessionTimetableStatus}"   label="#{configMapController.getKey('CreateSessionHistoryTitle_trainer')}" required="true" requiredMessage="#{configMapController.getKey('CreateSessionHistoryRequiredMessage_trainer')}">
                                    <f:selectItems value="#{sessionTimetableController.timetableSessionStatusValues}" var="status" itemLabel="#{status.label} " itemValue="#{status.value}"/>

                                </p:selectOneMenu>
                            </f:facet>
                        </p:cellEditor> 


                    </p:column>
                    <p:column sortBy="#{item.sessiondate}" filterBy="#{item.sessiondate}" headerText="#{configMapController.getKey('ListSessionTimetableTitle_sessiondate')}"   >

                        <p:cellEditor> 
                            <f:facet name="output">
                                <h:outputText value="#{item.sessiondate}">
                                    <f:convertDateTime pattern="dd/MM/yyyy,  EEE HH:mm" />
                                </h:outputText>
                            </f:facet>
                            <f:facet name="input">
                                <p:calendar value="#{item.sessiondate}" pattern="dd/MM/yyyy,  EEE HH:mm"  >	
                                    <p:ajax event="dateSelect" listener= "#{sessionTimetableController.handleDateSelect}" update=":growl" />
                                </p:calendar>
                            </f:facet>
                        </p:cellEditor> 

                    </p:column>
                    <p:column sortBy="#{item.sessionTypesId.name}" filterBy="#{item.sessionTypesId.name}" headerText="#{configMapController.getKey('ListSessionTimetableTitle_sessionTypesId')}"   >
                        <p:cellEditor> 
                            <f:facet name="output">
                                <h:outputText value="#{item.sessionTypesId.name}"/>
                            </f:facet>
                            <f:facet name="input">
                                <p:inputText value="#{item.sessionTypesId.name}" label="#{configMapController.getKey('ListSessionTimetableTitle_sessionTypesId')}" />
                            </f:facet>
                        </p:cellEditor> 


                    </p:column>
                    <p:column sortBy="#{item.recurranceId.name}" filterBy="#{item.recurranceId.name}" headerText="#{configMapController.getKey('ListSessionTimetableTitle_recurranceId')}"   >
                        <p:cellEditor> 
                            <f:facet name="output">
                                <h:outputText value="#{item.recurranceId.name}"/>
                            </f:facet>
                            <f:facet name="input">
                                <p:inputText value="#{item.recurranceId.name}" label="#{configMapController.getKey('ListSessionTimetableTitle_recurranceId')}" />
                            </f:facet>
                        </p:cellEditor> 


                    </p:column>
                    <p:column sortBy="#{item.trainerId}" filterBy="#{item.trainerId}" headerText="#{configMapController.getKey('CreateSessionHistoryLabel_trainer')}"   >
                        <p:cellEditor> 
                            <f:facet name="output">
                                <p:graphicImage value="#{customerImagesController.dynamicImage}" width="50px">
                                    <f:param name="imageId" value="#{item.trainerId.profileImage.id}"/>
                                </p:graphicImage><br/>
                                <h:outputText value="#{item.trainerId.firstname} #{item.trainerId.lastname}"/>
                            </f:facet>
                            <f:facet name="input">
                                <p:selectOneMenu id="trainer"  value="#{item.trainerId}" converter="customersControllerConverter"  label="#{configMapController.getKey('CreateSessionHistoryTitle_trainer')}" required="true" requiredMessage="#{configMapController.getKey('CreateSessionHistoryRequiredMessage_trainer')}">
                                    <f:selectItems value="#{customersController.getCustomersByGroupObject('TRAINER',true)}" var="cust" itemLabel="#{cust.firstname} #{cust.lastname}" itemValue="#{cust}"/>

                                </p:selectOneMenu>
                            </f:facet>
                        </p:cellEditor> 


                    </p:column>
                    <p:column sortBy="#{item.comments}" filterMatchMode="contains" filterBy="#{item.comments}" headerText="#{configMapController.getKey('ListSessionTimetableTitle_comments')}" style="width:450px"  >
                        <p:cellEditor> 
                            <f:facet name="output">
                                <h:outputText value="#{item.comments}"/>
                            </f:facet>
                            <f:facet name="input">
                                <p:inputText value="#{item.comments}" label="#{configMapController.getKey('ListSessionTimetableTitle_comments')}" />
                            </f:facet>
                        </p:cellEditor> 
                    </p:column>

                    <p:column sortBy="#{item.sessionStyleClasses}" filterBy="#{item.sessionStyleClasses}" headerText="#{configMapController.getKey('ListSessionTimetableTitle_sessionStyleClasses')}"   >
                        <p:cellEditor> 
                            <f:facet name="output">
                                <h:outputText value="#{item.sessionStyleClasses}"/>
                            </f:facet>
                            <f:facet name="input">
                                <p:inputText value="#{item.sessionStyleClasses}" label="#{configMapController.getKey('ListSessionTimetableTitle_sessionStyleClasses')}" />
                            </f:facet>
                        </p:cellEditor> 
                    </p:column>


                    <p:column sortBy="#{item.adminNotes}" filterBy="#{item.adminNotes}" headerText="#{configMapController.getKey('ListSessionTimetableTitle_adminNotes')}"   >
                        <p:cellEditor> 
                            <f:facet name="output">
                                <h:outputText value="#{item.adminNotes}"/>
                            </f:facet>
                            <f:facet name="input">
                                <p:inputText value="#{item.adminNotes}" label="#{configMapController.getKey('ListSessionTimetableTitle_adminNotes')}" />
                            </f:facet>
                        </p:cellEditor> 


                    </p:column>
                    <p:column sortBy="#{item.durationMinutes}" filterBy="#{item.durationMinutes}" headerText="#{configMapController.getKey('ListSessionTimetableTitle_durationMinutes')}"   >
                        <p:cellEditor> 
                            <f:facet name="output">
                                <h:outputText value="#{item.durationMinutes}"/>
                            </f:facet>
                            <f:facet name="input">
                                <p:inputText value="#{item.durationMinutes}" label="#{configMapController.getKey('ListSessionTimetableTitle_durationMinutes')}" />
                            </f:facet>
                        </p:cellEditor> 


                    </p:column>

                    <p:column sortBy="#{item.sessionCasualRate}" filterBy="#{item.sessionCasualRate}" headerText="#{configMapController.getKey('ListSessionTimetableTitle_sessionCasualRate')}"   >
                        <p:cellEditor> 
                            <f:facet name="output">
                                <h:outputText value="#{item.sessionCasualRate}">
                                    <f:convertNumber type="currency" currencySymbol="$" locale="au-AU" />
                                </h:outputText>
                            </f:facet>
                            <f:facet name="input">
                                <p:inputText value="#{item.sessionCasualRate}" label="#{configMapController.getKey('ListSessionTimetableTitle_sessionCasualRate')}" >
                                    <f:convertNumber  minFractionDigits="2"/>
                                </p:inputText> 
                            </f:facet>
                        </p:cellEditor> 
                    </p:column>

                    <p:column sortBy="#{item.sessionMembersRate}" filterBy="#{item.sessionMembersRate}" headerText="#{configMapController.getKey('ListSessionTimetableTitle_sessionMembersRate')}"   >
                        <p:cellEditor> 
                            <f:facet name="output">
                                <h:outputText value="#{item.sessionMembersRate}">
                                    <f:convertNumber type="currency" currencySymbol="$" locale="au-AU" />
                                </h:outputText>
                            </f:facet>
                            <f:facet name="input">
                                <p:inputText value="#{item.sessionMembersRate}" label="#{configMapController.getKey('ListSessionTimetableTitle_sessionMembersRate')}" >
                                    <f:convertNumber  minFractionDigits="2"/>
                                </p:inputText> 
                            </f:facet>
                        </p:cellEditor> 
                    </p:column>


                    <p:column sortBy="#{item.sessionTitle}" filterBy="#{item.sessionTitle}" headerText="#{configMapController.getKey('ListSessionTimetableTitle_sessionTitle')}"   >
                        <p:cellEditor> 
                            <f:facet name="output">
                                <h:outputText value="#{item.sessionTitle}"/>
                            </f:facet>
                            <f:facet name="input">
                                <p:inputText value="#{item.sessionTitle}" label="#{configMapController.getKey('ListSessionTimetableTitle_sessionTitle')}" />
                            </f:facet>
                        </p:cellEditor> 


                    </p:column>
                    <p:column sortBy="#{item.sessionLocationLabel}" filterBy="#{item.sessionLocationLabel}" headerText="#{configMapController.getKey('ListSessionTimetableTitle_sessionLocationLabel')}"   >
                        <p:cellEditor> 
                            <f:facet name="output">
                                <h:outputText value="#{item.sessionLocationLabel}"/>
                            </f:facet>
                            <f:facet name="input">
                                <p:inputText value="#{item.sessionLocationLabel}" label="#{configMapController.getKey('ListSessionTimetableTitle_sessionLocationLabel')}" />
                            </f:facet>
                        </p:cellEditor> 


                    </p:column>
                    <p:column sortBy="#{item.sessionLocationGps}" filterBy="#{item.sessionLocationGps}" headerText="#{configMapController.getKey('ListSessionTimetableTitle_sessionLocationGps')}"   >
                        <p:cellEditor> 
                            <f:facet name="output">
                                <h:outputText value="#{item.sessionLocationGps}"/>
                            </f:facet>
                            <f:facet name="input">
                                <p:inputText value="#{item.sessionLocationGps}" label="#{configMapController.getKey('ListSessionTimetableTitle_sessionLocationGps')}" />
                            </f:facet>
                        </p:cellEditor> 


                    </p:column>
                    <p:column sortBy="#{item.showBookingButton}" filterBy="#{item.showBookingButton}" headerText="#{configMapController.getKey('ListSessionTimetableTitle_showBookingButton')}"   >
                        <p:cellEditor> 
                            <f:facet name="output">
                                <p:selectBooleanCheckbox value="#{item.showBookingButton}" disabled="true"/>
                            </f:facet>
                            <f:facet name="input">
                                <p:selectBooleanCheckbox value="#{item.showBookingButton}"  label="#{configMapController.getKey('ListSessionTimetableTitle_showBookingButton')}" />
                            </f:facet>
                        </p:cellEditor> 
                    </p:column>
                    <p:column sortBy="#{item.showSignupButton}" filterBy="#{item.showSignupButton}" headerText="#{configMapController.getKey('ListSessionTimetableTitle_showSignupButton')}"   >
                        <p:cellEditor> 
                            <f:facet name="output">
                                <p:selectBooleanCheckbox value="#{item.showSignupButton}" disabled="true"/>
                            </f:facet>
                            <f:facet name="input">
                                <p:selectBooleanCheckbox value="#{item.showSignupButton}"  label="#{configMapController.getKey('ListSessionTimetableTitle_showBookingButton')}" />
                            </f:facet>
                        </p:cellEditor> 
                    </p:column>

                    <p:column rendered="#{sessionTimetableController.isUserInRole('ADMIN')}"  headerText="Edit" style="width:50px">  
                        <p:rowEditor />  
                    </p:column>  



                </p:dataTable>
            </h:panelGroup>
        </h:form>

        <ui:include src="Create.xhtml"/>
        <ui:include src="Edit.xhtml"/>
        <ui:include src="View.xhtml"/>

    </ui:define>
</ui:composition>
<!-- Generated from template ( JSF_from_entity_wizard/StandardJSF/list.ftl  )- Dave 23rd October 2015 -->

