<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui" >

    <ui:composition template="/template.xhtml">
        <ui:define name="title">
            <h:outputText value="#{configMapController.getKey('ListInvoiceTitle')}"></h:outputText>
        </ui:define>
        <ui:define name="body">


            <h:form id="formInvoiceCreate1">
                <p:confirmDialog id="confirmDialogInvoiceCreate1" message="Add a Key/ Value Pair to the configuration table"  
                                 header="#{configMapController.getKey('CreateInvoiceTitle')}" severity="info" widgetVar="InvoiceCreateDialogue"> 

                    <p:panelGrid columns="2">
                        <p:outputLabel value="#{configMapController.getKey('CreateInvoiceLabel_id')}" for="id" />
                        <p:inputText id="id" value="#{invoiceController.selected.id}" title="#{configMapController.getKey('CreateInvoiceTitle_id')}" required="true" requiredMessage="#{configMapController.getKey('CreateInvoiceRequiredMessage_id')}"/>
                        <p:outputLabel value="#{configMapController.getKey('CreateInvoiceLabel_createDatetime')}" for="createDatetime" />


                        <p:calendar id="createDatetime" pattern="MM/dd/yyyy HH:mm:ss" value="#{invoiceController.selected.createDatetime}" title="#{configMapController.getKey('CreateInvoiceTitle_createDatetime')}" required="true" requiredMessage="#{configMapController.getKey('CreateInvoiceRequiredMessage_createDatetime')}">
                            <p:ajax event="dateSelect" listener="#{invoiceController.handleDateSelect}" update=":formInvoiceCreate1" />
                        </p:calendar>
                        <p:outputLabel value="#{configMapController.getKey('CreateInvoiceLabel_userId')}" for="userId" />
                        <p:inputText id="userId" value="#{invoiceController.selected.userId}" title="#{configMapController.getKey('CreateInvoiceTitle_userId')}" />
                        <p:outputLabel value="#{configMapController.getKey('CreateInvoiceLabel_statusId')}" for="statusId" />
                        <p:inputText id="statusId" value="#{invoiceController.selected.statusId}" title="#{configMapController.getKey('CreateInvoiceTitle_statusId')}" required="true" requiredMessage="#{configMapController.getKey('CreateInvoiceRequiredMessage_statusId')}"/>
                        <p:outputLabel value="#{configMapController.getKey('CreateInvoiceLabel_dueDate')}" for="dueDate" />


                        <p:calendar id="dueDate" pattern="MM/dd/yyyy HH:mm:ss" value="#{invoiceController.selected.dueDate}" title="#{configMapController.getKey('CreateInvoiceTitle_dueDate')}" required="true" requiredMessage="#{configMapController.getKey('CreateInvoiceRequiredMessage_dueDate')}">
                            <p:ajax event="dateSelect" listener="#{invoiceController.handleDateSelect}" update=":formInvoiceCreate1" />
                        </p:calendar>
                        <p:outputLabel value="#{configMapController.getKey('CreateInvoiceLabel_total')}" for="total" />
                        <p:inputText id="total" value="#{invoiceController.selected.total}" title="#{configMapController.getKey('CreateInvoiceTitle_total')}" required="true" requiredMessage="#{configMapController.getKey('CreateInvoiceRequiredMessage_total')}"/>
                        <p:outputLabel value="#{configMapController.getKey('CreateInvoiceLabel_paymentAttempts')}" for="paymentAttempts" />
                        <p:inputText id="paymentAttempts" value="#{invoiceController.selected.paymentAttempts}" title="#{configMapController.getKey('CreateInvoiceTitle_paymentAttempts')}" required="true" requiredMessage="#{configMapController.getKey('CreateInvoiceRequiredMessage_paymentAttempts')}"/>
                        <p:outputLabel value="#{configMapController.getKey('CreateInvoiceLabel_balance')}" for="balance" />
                        <p:inputText id="balance" value="#{invoiceController.selected.balance}" title="#{configMapController.getKey('CreateInvoiceTitle_balance')}" />
                        <p:outputLabel value="#{configMapController.getKey('CreateInvoiceLabel_carriedBalance')}" for="carriedBalance" />
                        <p:inputText id="carriedBalance" value="#{invoiceController.selected.carriedBalance}" title="#{configMapController.getKey('CreateInvoiceTitle_carriedBalance')}" required="true" requiredMessage="#{configMapController.getKey('CreateInvoiceRequiredMessage_carriedBalance')}"/>
                        <p:outputLabel value="#{configMapController.getKey('CreateInvoiceLabel_inProcessPayment')}" for="inProcessPayment" />
                        <p:inputText id="inProcessPayment" value="#{invoiceController.selected.inProcessPayment}" title="#{configMapController.getKey('CreateInvoiceTitle_inProcessPayment')}" required="true" requiredMessage="#{configMapController.getKey('CreateInvoiceRequiredMessage_inProcessPayment')}"/>
                        <p:outputLabel value="#{configMapController.getKey('CreateInvoiceLabel_isReview')}" for="isReview" />
                        <p:inputText id="isReview" value="#{invoiceController.selected.isReview}" title="#{configMapController.getKey('CreateInvoiceTitle_isReview')}" required="true" requiredMessage="#{configMapController.getKey('CreateInvoiceRequiredMessage_isReview')}"/>
                        <p:outputLabel value="#{configMapController.getKey('CreateInvoiceLabel_deleted')}" for="deleted" />
                        <p:inputText id="deleted" value="#{invoiceController.selected.deleted}" title="#{configMapController.getKey('CreateInvoiceTitle_deleted')}" required="true" requiredMessage="#{configMapController.getKey('CreateInvoiceRequiredMessage_deleted')}"/>
                        <p:outputLabel value="#{configMapController.getKey('CreateInvoiceLabel_customerNotes')}" for="customerNotes" />
                        <p:inputText id="customerNotes" value="#{invoiceController.selected.customerNotes}" title="#{configMapController.getKey('CreateInvoiceTitle_customerNotes')}" />
                        <p:outputLabel value="#{configMapController.getKey('CreateInvoiceLabel_publicNumber')}" for="publicNumber" />
                        <p:inputText id="publicNumber" value="#{invoiceController.selected.publicNumber}" title="#{configMapController.getKey('CreateInvoiceTitle_publicNumber')}" />
                        <p:outputLabel value="#{configMapController.getKey('CreateInvoiceLabel_lastReminder')}" for="lastReminder" />


                        <p:calendar id="lastReminder" pattern="MM/dd/yyyy HH:mm:ss" value="#{invoiceController.selected.lastReminder}" title="#{configMapController.getKey('CreateInvoiceTitle_lastReminder')}" >
                            <p:ajax event="dateSelect" listener="#{invoiceController.handleDateSelect}" update=":formInvoiceCreate1" />
                        </p:calendar>
                        <p:outputLabel value="#{configMapController.getKey('CreateInvoiceLabel_overdueStep')}" for="overdueStep" />
                        <p:inputText id="overdueStep" value="#{invoiceController.selected.overdueStep}" title="#{configMapController.getKey('CreateInvoiceTitle_overdueStep')}" />
                        <p:outputLabel value="#{configMapController.getKey('CreateInvoiceLabel_createTimestamp')}" for="createTimestamp" />


                        <p:calendar id="createTimestamp" pattern="MM/dd/yyyy HH:mm:ss" value="#{invoiceController.selected.createTimestamp}" title="#{configMapController.getKey('CreateInvoiceTitle_createTimestamp')}" required="true" requiredMessage="#{configMapController.getKey('CreateInvoiceRequiredMessage_createTimestamp')}">
                            <p:ajax event="dateSelect" listener="#{invoiceController.handleDateSelect}" update=":formInvoiceCreate1" />
                        </p:calendar>
                        <p:outputLabel value="#{configMapController.getKey('CreateInvoiceLabel_delegatedInvoiceId')}" for="delegatedInvoiceId" />
                        <p:selectOneMenu id="delegatedInvoiceId" valueChangeListener="#{invoiceController.selectOneMenuValueChangeListener}" value="#{invoiceController.selected.delegatedInvoiceId}" label="#{configMapController.getKey('CreateInvoiceTitle_delegatedInvoiceId')}" >
                            <f:selectItems value="#{invoiceController.itemsAvailableSelectOne}"/>
                            <p:ajax   update=":formInvoiceCreate1"  />
                        </p:selectOneMenu>
                        <p:outputLabel value="#{configMapController.getKey('CreateInvoiceLabel_currencyId')}" for="currencyId" />
                        <p:selectOneMenu id="currencyId" valueChangeListener="#{invoiceController.selectOneMenuValueChangeListener}" value="#{invoiceController.selected.currencyId}" label="#{configMapController.getKey('CreateInvoiceTitle_currencyId')}" required="true" requiredMessage="#{configMapController.getKey('CreateInvoiceRequiredMessage_currencyId')}">
                            <f:selectItems value="#{currencyController.itemsAvailableSelectOne}"/>
                            <p:ajax   update=":formInvoiceCreate1"  />
                        </p:selectOneMenu>
                        <p:commandButton oncomplete="InvoiceCreateDialogue.hide();invoiceControllerTable.filter()" actionListener="#{invoiceController.createDialogue}" value="#{configMapController.getKey('CreateInvoiceSaveLink')}" update=":menuForm:growl"/>                
                    </p:panelGrid>
                </p:confirmDialog>
            </h:form>





            <h:form id="InvoicelistForm1">
                <h:panelGroup >
                    <p:commandButton id="showDialogButton"  value="#{configMapController.getKey('ListInvoiceCreateLink')}" onclick="InvoiceCreateDialogue.show()" type="button"/> 

                </h:panelGroup>
                <h:outputText escape="false" value="#{configMapController.getKey('ListInvoiceEmpty')}" rendered="#{invoiceController.items.rowCount == 0}"/>
                <h:panelGroup rendered="#{invoiceController.items.rowCount > 0}">
                    <p:dataTable  editable="true" value="#{invoiceController.items}"  widgetVar="invoiceControllerTable" var="item"  paginator="true" rows="15"  paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"  rowsPerPageTemplate="5,10,15,20,25,50,100" >
                        <f:facet name="header">
                            <p:outputPanel>
                                <h:outputText value="Search all fields:" />
                                <h:inputText id="globalFilter" onkeyup="invoiceControllerTable.filter()" />
                            </p:outputPanel>
                        </f:facet>
                        <p:ajax event="rowEdit" listener="#{invoiceController.onEdit}" update=":menuForm:growl" oncomplete="invoiceControllerTable.filter()" />  
                        <p:ajax event="rowEditCancel" listener="#{invoiceController.onCancel}" update=":menuForm:growl"  oncomplete="invoiceControllerTable.filter()" />  

                        <p:column sortBy="#{item.id}" filterBy="#{item.id}" headerText="#{configMapController.getKey('ListInvoiceTitle_id')}"   >
                            <p:cellEditor> 
                                <f:facet name="output">
                                    <h:outputText value="#{item.id}"/>
                                </f:facet>
                                <f:facet name="input">
                                    <p:inputText value="#{item.id}" label="#{configMapController.getKey('ListInvoiceTitle_id')}" />
                                </f:facet>
                            </p:cellEditor> 


                        </p:column>
                        <p:column sortBy="#{item.createDatetime}" filterBy="#{item.createDatetime}" headerText="#{configMapController.getKey('ListInvoiceTitle_createDatetime')}"   >

                            <p:cellEditor> 
                                <f:facet name="output">
                                    <h:outputText value="#{item.createDatetime}">
                                        <f:convertDateTime pattern="MM/dd/yyyy HH:mm:ss" />
                                    </h:outputText>
                                </f:facet>
                                <f:facet name="input">
                                    <p:calendar value="#{item.createDatetime}">	
                                        <p:ajax event="dateSelect" listener= "#{invoiceController.handleDateSelect}" update=":menuForm:growl" />
                                    </p:calendar>
                                </f:facet>
                            </p:cellEditor> 

                        </p:column>
                        <p:column sortBy="#{item.userId}" filterBy="#{item.userId}" headerText="#{configMapController.getKey('ListInvoiceTitle_userId')}"   >
                            <p:cellEditor> 
                                <f:facet name="output">
                                    <h:outputText value="#{item.userId}"/>
                                </f:facet>
                                <f:facet name="input">
                                    <p:inputText value="#{item.userId}" label="#{configMapController.getKey('ListInvoiceTitle_userId')}" />
                                </f:facet>
                            </p:cellEditor> 


                        </p:column>
                        <p:column sortBy="#{item.statusId}" filterBy="#{item.statusId}" headerText="#{configMapController.getKey('ListInvoiceTitle_statusId')}"   >
                            <p:cellEditor> 
                                <f:facet name="output">
                                    <h:outputText value="#{item.statusId}"/>
                                </f:facet>
                                <f:facet name="input">
                                    <p:inputText value="#{item.statusId}" label="#{configMapController.getKey('ListInvoiceTitle_statusId')}" />
                                </f:facet>
                            </p:cellEditor> 


                        </p:column>
                        <p:column sortBy="#{item.dueDate}" filterBy="#{item.dueDate}" headerText="#{configMapController.getKey('ListInvoiceTitle_dueDate')}"   >

                            <p:cellEditor> 
                                <f:facet name="output">
                                    <h:outputText value="#{item.dueDate}">
                                        <f:convertDateTime pattern="MM/dd/yyyy HH:mm:ss" />
                                    </h:outputText>
                                </f:facet>
                                <f:facet name="input">
                                    <p:calendar value="#{item.dueDate}">	
                                        <p:ajax event="dateSelect" listener= "#{invoiceController.handleDateSelect}" update=":menuForm:growl" />
                                    </p:calendar>
                                </f:facet>
                            </p:cellEditor> 

                        </p:column>
                        <p:column sortBy="#{item.total}" filterBy="#{item.total}" headerText="#{configMapController.getKey('ListInvoiceTitle_total')}"   >
                            <p:cellEditor> 
                                <f:facet name="output">
                                    <h:outputText value="#{item.total}"/>
                                </f:facet>
                                <f:facet name="input">
                                    <p:inputText value="#{item.total}" label="#{configMapController.getKey('ListInvoiceTitle_total')}" />
                                </f:facet>
                            </p:cellEditor> 


                        </p:column>
                        <p:column sortBy="#{item.paymentAttempts}" filterBy="#{item.paymentAttempts}" headerText="#{configMapController.getKey('ListInvoiceTitle_paymentAttempts')}"   >
                            <p:cellEditor> 
                                <f:facet name="output">
                                    <h:outputText value="#{item.paymentAttempts}"/>
                                </f:facet>
                                <f:facet name="input">
                                    <p:inputText value="#{item.paymentAttempts}" label="#{configMapController.getKey('ListInvoiceTitle_paymentAttempts')}" />
                                </f:facet>
                            </p:cellEditor> 


                        </p:column>
                        <p:column sortBy="#{item.balance}" filterBy="#{item.balance}" headerText="#{configMapController.getKey('ListInvoiceTitle_balance')}"   >
                            <p:cellEditor> 
                                <f:facet name="output">
                                    <h:outputText value="#{item.balance}"/>
                                </f:facet>
                                <f:facet name="input">
                                    <p:inputText value="#{item.balance}" label="#{configMapController.getKey('ListInvoiceTitle_balance')}" />
                                </f:facet>
                            </p:cellEditor> 


                        </p:column>
                        <p:column sortBy="#{item.carriedBalance}" filterBy="#{item.carriedBalance}" headerText="#{configMapController.getKey('ListInvoiceTitle_carriedBalance')}"   >
                            <p:cellEditor> 
                                <f:facet name="output">
                                    <h:outputText value="#{item.carriedBalance}"/>
                                </f:facet>
                                <f:facet name="input">
                                    <p:inputText value="#{item.carriedBalance}" label="#{configMapController.getKey('ListInvoiceTitle_carriedBalance')}" />
                                </f:facet>
                            </p:cellEditor> 


                        </p:column>
                        <p:column sortBy="#{item.inProcessPayment}" filterBy="#{item.inProcessPayment}" headerText="#{configMapController.getKey('ListInvoiceTitle_inProcessPayment')}"   >
                            <p:cellEditor> 
                                <f:facet name="output">
                                    <h:outputText value="#{item.inProcessPayment}"/>
                                </f:facet>
                                <f:facet name="input">
                                    <p:inputText value="#{item.inProcessPayment}" label="#{configMapController.getKey('ListInvoiceTitle_inProcessPayment')}" />
                                </f:facet>
                            </p:cellEditor> 


                        </p:column>
                        <p:column sortBy="#{item.isReview}" filterBy="#{item.isReview}" headerText="#{configMapController.getKey('ListInvoiceTitle_isReview')}"   >
                            <p:cellEditor> 
                                <f:facet name="output">
                                    <h:outputText value="#{item.isReview}"/>
                                </f:facet>
                                <f:facet name="input">
                                    <p:inputText value="#{item.isReview}" label="#{configMapController.getKey('ListInvoiceTitle_isReview')}" />
                                </f:facet>
                            </p:cellEditor> 


                        </p:column>
                        <p:column sortBy="#{item.deleted}" filterBy="#{item.deleted}" headerText="#{configMapController.getKey('ListInvoiceTitle_deleted')}"   >
                            <p:cellEditor> 
                                <f:facet name="output">
                                    <h:outputText value="#{item.deleted}"/>
                                </f:facet>
                                <f:facet name="input">
                                    <p:inputText value="#{item.deleted}" label="#{configMapController.getKey('ListInvoiceTitle_deleted')}" />
                                </f:facet>
                            </p:cellEditor> 


                        </p:column>
                        <p:column sortBy="#{item.customerNotes}" filterBy="#{item.customerNotes}" headerText="#{configMapController.getKey('ListInvoiceTitle_customerNotes')}"   >
                            <p:cellEditor> 
                                <f:facet name="output">
                                    <h:outputText value="#{item.customerNotes}"/>
                                </f:facet>
                                <f:facet name="input">
                                    <p:inputText value="#{item.customerNotes}" label="#{configMapController.getKey('ListInvoiceTitle_customerNotes')}" />
                                </f:facet>
                            </p:cellEditor> 


                        </p:column>
                        <p:column sortBy="#{item.publicNumber}" filterBy="#{item.publicNumber}" headerText="#{configMapController.getKey('ListInvoiceTitle_publicNumber')}"   >
                            <p:cellEditor> 
                                <f:facet name="output">
                                    <h:outputText value="#{item.publicNumber}"/>
                                </f:facet>
                                <f:facet name="input">
                                    <p:inputText value="#{item.publicNumber}" label="#{configMapController.getKey('ListInvoiceTitle_publicNumber')}" />
                                </f:facet>
                            </p:cellEditor> 


                        </p:column>
                        <p:column sortBy="#{item.lastReminder}" filterBy="#{item.lastReminder}" headerText="#{configMapController.getKey('ListInvoiceTitle_lastReminder')}"   >

                            <p:cellEditor> 
                                <f:facet name="output">
                                    <h:outputText value="#{item.lastReminder}">
                                        <f:convertDateTime pattern="MM/dd/yyyy HH:mm:ss" />
                                    </h:outputText>
                                </f:facet>
                                <f:facet name="input">
                                    <p:calendar value="#{item.lastReminder}">	
                                        <p:ajax event="dateSelect" listener= "#{invoiceController.handleDateSelect}" update=":menuForm:growl" />
                                    </p:calendar>
                                </f:facet>
                            </p:cellEditor> 

                        </p:column>
                        <p:column sortBy="#{item.overdueStep}" filterBy="#{item.overdueStep}" headerText="#{configMapController.getKey('ListInvoiceTitle_overdueStep')}"   >
                            <p:cellEditor> 
                                <f:facet name="output">
                                    <h:outputText value="#{item.overdueStep}"/>
                                </f:facet>
                                <f:facet name="input">
                                    <p:inputText value="#{item.overdueStep}" label="#{configMapController.getKey('ListInvoiceTitle_overdueStep')}" />
                                </f:facet>
                            </p:cellEditor> 


                        </p:column>
                        <p:column sortBy="#{item.createTimestamp}" filterBy="#{item.createTimestamp}" headerText="#{configMapController.getKey('ListInvoiceTitle_createTimestamp')}"   >

                            <p:cellEditor> 
                                <f:facet name="output">
                                    <h:outputText value="#{item.createTimestamp}">
                                        <f:convertDateTime pattern="MM/dd/yyyy HH:mm:ss" />
                                    </h:outputText>
                                </f:facet>
                                <f:facet name="input">
                                    <p:calendar value="#{item.createTimestamp}">	
                                        <p:ajax event="dateSelect" listener= "#{invoiceController.handleDateSelect}" update=":menuForm:growl" />
                                    </p:calendar>
                                </f:facet>
                            </p:cellEditor> 

                        </p:column>
                        <p:column sortBy="#{item.delegatedInvoiceId}" filterBy="#{item.delegatedInvoiceId}" headerText="#{configMapController.getKey('ListInvoiceTitle_delegatedInvoiceId')}"   >
                            <p:cellEditor> 
                                <f:facet name="output">
                                    <h:outputText value="#{item.delegatedInvoiceId}"/>
                                </f:facet>
                                <f:facet name="input">
                                    <p:inputText value="#{item.delegatedInvoiceId}" label="#{configMapController.getKey('ListInvoiceTitle_delegatedInvoiceId')}" />
                                </f:facet>
                            </p:cellEditor> 


                        </p:column>
                        <p:column sortBy="#{item.currencyId}" filterBy="#{item.currencyId}" headerText="#{configMapController.getKey('ListInvoiceTitle_currencyId')}"   >
                            <p:cellEditor> 
                                <f:facet name="output">
                                    <h:outputText value="#{item.currencyId}"/>
                                </f:facet>
                                <f:facet name="input">
                                    <p:inputText value="#{item.currencyId}" label="#{configMapController.getKey('ListInvoiceTitle_currencyId')}" />
                                </f:facet>
                            </p:cellEditor> 


                        </p:column>
                        <p:column rendered="#{invoiceController.isUserInRole('ADMIN')}"  headerText="Edit" style="width:50px">  
                            <p:rowEditor />  
                        </p:column>  

                        <p:column>
                            <p:commandButton rendered="#{invoiceController.isUserInRole('ADMIN')}"  update=":InvoicelistForm1 :menuForm:growl" action="#{invoiceController.destroy}" value="#{configMapController.getKey('ListInvoiceDestroyLink')}">
                                <f:setPropertyActionListener value="#{item}" target="#{invoiceController.selectedForDeletion}" />
                            </p:commandButton>                        

                        </p:column>
                    </p:dataTable>
                </h:panelGroup>
            </h:form>
        </ui:define>
    </ui:composition>

</html>
