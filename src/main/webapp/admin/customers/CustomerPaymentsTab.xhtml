
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition  xmlns="http://www.w3.org/1999/xhtml"
                 xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                 xmlns:h="http://xmlns.jcp.org/jsf/html"
                 xmlns:f="http://xmlns.jcp.org/jsf/core"
                 xmlns:pe="http://primefaces.org/ui/extensions"
                 xmlns:p="http://primefaces.org/ui" >

    <h:form id="paymentsForm" styleClass="updatePaymentInfo"> 

        <p:panel id="progressBarPanel" rendered="#{ezidebit.asyncOperationRunning}" >
            <h:outputText id="statusText" value="Please wait while the payment data for #{customersController.selected.firstname} #{customersController.selected.lastname} is loaded..." />
            <p:commandButton id="reloadPageButton2" value="Reload Page" actionListener="#{ezidebit.refreshPaymentsPage}"  update=":tv:paymentsForm  :growl" />

        </p:panel>

        <p:outputPanel id="mainPanel" rendered="#{ezidebit.asyncOperationRunning == false and ezidebit.customerDetailsHaveBeenRetrieved == true  }" >
            <p:commandButton id="reloadPageButton" value="Reload Page" actionListener="#{ezidebit.refreshPaymentsPage}" rendered="#{ezidebit.theCustomerProvisionedInThePaymentGateway }" update=":tv:paymentsForm  :growl" />
           <!-- <p:commandButton  value="#{configMapController.getKey('sendCustomerOnBoardEmailButton')}"  actionListener="#{customersController.sendCustomerOnboardEmail}" update="@(.updateNotesDataTable) :growl"/>-->
            <p:commandButton  value="#{configMapController.getKey('sendCustomerOnBoardEmailButton')}" actionListener="#{customersController.sendOnboardEmailListener}" onclick="PF('SendEmailToCustomerDialog').show()"  update="@(.updateEmailTemplatePopup) :growl"/>


            <p:commandButton id="eddrButton" disabled="#{!ezidebit.showAddToPaymentGatewayButton}"  actionListener="#{ezidebit.updatePaymentScheduleForm}"  oncomplete="PF('createEddrLinkDialogueWidget').show();" update=":growl :tv:paymentsForm :createEddrLink @(.updateNotesDataTable) "   value="#{configMapController.getKey('WebDDRScheduleSetupButton')}" />
            <p:commandButton  value="#{configMapController.getKey('sendPaymentFormEmailButton')}"  actionListener="#{customersController.sendPaymentFormEmail}" update="@(.updateNotesDataTable) :growl"/>
            <p:commandButton id="paymentsButton" disabled="#{!ezidebit.showAddToPaymentGatewayButton}"    actionListener="#{ezidebit.createCustomerRecord}" update=":growl :tv:paymentsForm "   value="#{configMapController.getKey('EditCustomersUpdatePayment')}" />

            <p:commandButton id="editPaymentMethodButton" rendered="#{ezidebit.theCustomerProvisionedInThePaymentGateway == true }"  oncomplete="PF('editPaymentMethod2DialogueWidget').show();"    value="#{configMapController.getKey('editPaymentMethodButtonLink')}" update=":growl @(.updatePaymentInfo)"  /> 

            <h:outputText rendered="#{ezidebit.waitingForPaymentDetails}" value="WAITING FOR BANK DETAILS - "/>
            <h:outputText rendered="#{!ezidebit.theCustomerProvisionedInThePaymentGateway  }" value=" Customer Is Not Provisioned on Payment Gateway!"/>
            <!--<h:outputText rendered="#{!ezidebit.asyncOperationRunning}" value=" Status: Idle"/>
            <h:outputText rendered="#{ezidebit.asyncOperationRunning}" value="Status: Busy"/>-->

            <h:outputText  id="testPaymentUpdate"  value="Last Updated:#{ezidebit.testAjaxUpdateTime}">
                <f:convertDateTime pattern="hh:MM:ss.SSS" />                              
            </h:outputText>

        </p:outputPanel>

        <p:panel  id="paymentsTablePanel2" rendered="#{ezidebit.paymentDBList != null}" >
            <p:dataTable  id="paymentsTable2"
                         
                          selection="#{ezidebit.multiSelectedScheduledPayment}" 
                          value="#{ezidebit.paymentDBList}" 
                          filteredValue="#{ezidebit.paymentsDBListFilteredItems}"  
                          widgetVar="paymentsListControllerTable2"
                          var="pay"  
                          rowKey="#{pay.id}"
                          scrollHeight="500"
                          scrollable="true" 
                          reflow="true"
                          >
                <f:facet name="header">
                    <p:outputPanel>
                        <p:outputPanel>
                           <!-- <h:outputText  rendered="#{ezidebit.paymentsDBListFilteredItems != null}" value="#{ezidebit.paymentsDBListFilteredItems.size} Records Found" />-->
                            <h:outputText  rendered="#{ezidebit.paymentDBList != null}" value="#{ezidebit.paymentDBList.rowCount} Payment Records Found for #{customersController.selected.firstname} #{customersController.selected.lastname}" />
                        </p:outputPanel>

                        <p:commandButton id="logCashPaymentButton" oncomplete="PF('logCashPaymentDialogueWidget').show();"    value="#{configMapController.getKey('logCashPaymentButtonLink')}"  update=":growl " /> 

                        <p:commandButton id="showAddPaymentButton" rendered="#{ezidebit.waitingForPaymentDetails == false and ezidebit.customerCancelledInPaymentGateway == false and ezidebit.theCustomerProvisionedInThePaymentGateway == true}" oncomplete="PF('createPaymentDialogueWidget').show();"    value="#{configMapController.getKey('AddPaymentButtonLink')}"  update=":growl " /> 
                        <p:commandButton id="showAddPaymentScheduleButton" rendered="#{ezidebit.waitingForPaymentDetails == false and ezidebit.customerCancelledInPaymentGateway == false and ezidebit.theCustomerProvisionedInThePaymentGateway == true}" oncomplete="PF('createPaymentScheduleDialogueWidget').show();"    value="#{configMapController.getKey('AddPaymentScheduleButtonLink')}" update=":growl "  /> 
                        <p:commandButton id="showClearScheduleButton" rendered="#{ezidebit.waitingForPaymentDetails == false and ezidebit.customerCancelledInPaymentGateway == false and ezidebit.theCustomerProvisionedInThePaymentGateway == true}" oncomplete="PF('clearScheduleDialogueWidget').show();"    value="#{configMapController.getKey('ClearScheduleButtonLink')}" update=":growl "  /> 

                        <p:commandButton  id="deleteButton" process=":tv:paymentsForm:paymentsTable2" rendered="#{fitnessTestChartsController.isUserInRole('ADMIN')}"  icon="ui-icon-trash"  value="#{configMapController.getKey('Delete')}" actionListener="#{ezidebit.deleteScheduledPayment}" update=":growl :tv:paymentsForm:scheduledPaymentsTable :tv:paymentsForm:paymentsTable2 " disabled="#{empty fitnessTestChartsController.selected}"/>
                        <p:commandButton id="addNoteDialogButton2"  value="#{configMapController.getKey('ListNotesCreateLink')}" onclick="PF('notesCreateDialogue').show()" /> 
                        <h:outputText  id="testPaymentUpdate2"  value="Time:#{ezidebit.testAjaxUpdateTime}">
                            <f:convertDateTime pattern="yyyy-MM-dd hh:mm:ss.SSS" />                              
                        </h:outputText>
                    </p:outputPanel>
                </f:facet>

                <p:ajax event="rowSelect"  listener="#{ezidebit.updateSelectedScheduledPayment}" />
                <p:ajax event="rowUnselect" /> 
                <p:column selectionMode="multiple" />
                <p:column  sortBy="#{pay.paymentID}" filterBy="#{pay.paymentID}" headerText="#{configMapController.getKey('ListPaymentsTitle_paymentID')}"   >
                    <h:outputText value="#{pay.paymentID}"/>
                    <h:outputText  rendered="#{empty pay.paymentID}"  value="Scheduled" style="background-color: lightseagreen;"/>
                </p:column>

                <p:column  sortBy="#{pay.customerName.lastname}" filterBy="#{pay.customerName.lastname}" headerText="#{configMapController.getKey('ListPaymentsTitle_customerName')}"   >
                    <h:outputText value="#{pay.customerName.firstname} #{pay.customerName.lastname}"/>
                </p:column>
                <p:column  sortBy="#{pay.manuallyAddedPayment}" filterBy="#{pay.manuallyAddedPayment}" headerText="#{configMapController.getKey('ListPaymentsTitle_manual')}"   >
                    <h:outputText rendered="#{pay.manuallyAddedPayment}" value="Manual"/>
                    <h:outputText rendered="#{!pay.manuallyAddedPayment}" value="Auto"/>
                </p:column>

                <p:column  sortBy="#{pay.id}" filterBy="#{pay.id}" headerText="#{configMapController.getKey('ListPaymentsTitle_id')}"   >
                    <h:outputText value="#{pay.id}"/>
                </p:column>

                <p:column  sortBy="#{pay.paymentReference}" filterBy="#{pay.paymentReference}" headerText="#{configMapController.getKey('ListPaymentsTitle_paymentReference')}"   >
                    <h:outputText value="#{pay.paymentReference}"/>
                </p:column>
                <p:column  sortBy="#{pay.scheduledAmount}" filterBy="#{pay.scheduledAmount}"  headerText="#{configMapController.getKey('ListPaymentsTitle_scheduledAmount')}"   >
                    <h:outputText value="#{pay.scheduledAmount}">
                        <f:convertNumber type="currency" currencySymbol="$" locale="au-AU" />
                    </h:outputText>
                </p:column>
                <p:column  sortBy="#{pay.paymentAmount}" filterBy="#{pay.paymentAmount}"  headerText="#{configMapController.getKey('ListPaymentsTitle_paymentAmount')}"   >
                    <h:outputText value="#{pay.paymentAmount}">
                        <f:convertNumber type="currency" currencySymbol="$" locale="au-AU" />
                    </h:outputText>
                </p:column>
                <p:column  sortBy="#{pay.transactionFeeCustomer}" filterBy="#{pay.transactionFeeCustomer}" headerText="#{configMapController.getKey('ListPaymentsTitle_transactionFeeCustomer')}"   >
                    <h:outputText value="#{pay.transactionFeeCustomer}">
                        <f:convertNumber type="currency" currencySymbol="$" locale="au-AU" />
                    </h:outputText>
                </p:column>
                <p:column  sortBy="#{pay.transactionFeeClient}" filterBy="#{pay.transactionFeeClient}" headerText="#{configMapController.getKey('ListPaymentsTitle_transactionFeeClient')}"   >
                    <h:outputText value="#{pay.transactionFeeClient}">
                        <f:convertNumber type="currency" currencySymbol="$" locale="au-AU" />
                    </h:outputText>
                </p:column>
                <p:column  sortBy="#{pay.debitDate}" filterBy="#{pay.debitDate}" headerText="#{configMapController.getKey('ListPaymentsTitle_debitDate')}"   >
                    <h:outputText value="#{pay.debitDate}">
                        <f:convertDateTime pattern="E dd MMM yyyy" />
                    </h:outputText>
                </p:column>
                <p:column  sortBy="#{pay.settlementDate}" filterBy="#{pay.settlementDate}" headerText="#{configMapController.getKey('ListPaymentsTitle_settlementDate')}"   >
                    <h:outputText value="#{pay.settlementDate}">
                        <f:convertDateTime pattern="E dd MMM yyyy" />
                    </h:outputText>
                </p:column>
                <p:column  sortBy="#{pay.paymentStatus}" filterBy="#{pay.paymentStatus}" headerText="#{configMapController.getKey('ListPaymentsTitle_paymentStatus')}"   >

                    <h:outputText  rendered="#{pay.paymentStatus == 'W'}"  value="#{pay.paymentStatus} -- Waiting" style="color: blue"/>
                    <h:outputText  rendered="#{pay.paymentStatus == 'N'}"  value="#{pay.paymentStatus} -- Scheduled " style="color: blue"/>
                    <h:outputText  rendered="#{pay.paymentStatus == 'U'}"  value="#{pay.paymentStatus} -- Processing" style="color: yellow"/>
                    <h:outputText  rendered="#{pay.paymentStatus == 'P'}"  value="#{pay.paymentStatus} -- Pending" style="color: orange"/>
                    <h:outputText  rendered="#{pay.paymentStatus == 'S'}"  value="#{pay.paymentStatus} -- Successful" style="color: green"/>
                    <h:outputText  rendered="#{pay.paymentStatus == 'D'}"  value="#{pay.paymentStatus} -- Dis.Insufficient Funds" style="color: red"/>
                    <h:outputText  rendered="#{pay.paymentStatus == 'F'}"  value="#{pay.paymentStatus} -- Fatal Dishonour" style="color: red"/>
                    <h:outputText  rendered="#{pay.paymentStatus == 'X'}"  value="#{pay.paymentStatus} -- Deleted In PGW" style="color: red"/>
                    <h:outputText  rendered="#{pay.paymentStatus == 'H'}"  value="#{pay.paymentStatus} -- On Hold In PGW" style="color: orange"/>
                    <h:outputText  rendered="#{pay.paymentStatus == 'Y'}"  value="#{pay.paymentStatus} -- Delete Requested" style="color: yellow"/>
                    <h:outputText  rendered="#{pay.paymentStatus == 'R'}"  value="#{pay.paymentStatus} -- Rejected By PGW" style="color: red"/>
                </p:column>


            </p:dataTable>

        </p:panel>
        <p:panel id="customerDetailsPanel" rendered="#{customersController.selected.paymentParametersId != null }" header="CRM Customer Record">
            <p:panelGrid columns="2" style="width:100%">
                <p:outputLabel value="Customer Name:" /> <h:outputText value="CRM: #{customersController.selected.paymentParametersId.customerName}, EZI: #{ezidebit.currentCustomerDetails.customerName.value}"/>
                <p:outputLabel value="Customer Address:" /> <h:outputText value="CRM: #{customersController.selected.paymentParametersId.addressLine1}, EZI: #{ezidebit.currentCustomerDetails.addressLine1.value}, #{ezidebit.currentCustomerDetails.addressSuburb.value} #{ezidebit.currentCustomerDetails.addressState.value} #{ezidebit.currentCustomerDetails.addressPostCode.value}"/>
                <p:outputLabel value="Contract Start:" /> <h:outputText value="#{customersController.selected.paymentParametersId.contractStartDate}"/>
                <p:outputLabel value="Email Address:" /> <h:outputText value="#{customersController.selected.paymentParametersId.email}"/>
                <p:outputLabel value="Mobile Phone:" /> <h:outputText value="#{customersController.selected.paymentParametersId.mobilePhoneNumber}"/>
                <p:outputLabel value="Ezidebit ID:" /> <h:outputText value="#{customersController.selected.paymentParametersId.ezidebitCustomerID}"/>
                <p:outputLabel value="General  ID:" /> <h:outputText value="#{customersController.selected.paymentParametersId.yourGeneralReference}"/>
                <p:outputLabel value="System   ID:" /> <h:outputText value="#{customersController.selected.paymentParametersId.yourSystemReference}"/>
                <p:outputLabel value="Status:" /> <h:outputText value="#{customersController.selected.paymentParametersId.statusDescription}"/>
                <p:outputLabel value="Payment Method:" /> <h:outputText value="#{customersController.selected.paymentParametersId.paymentMethod}"/>
                <p:outputLabel value="Payment Period" /> <h:outputText value="#{customersController.selected.paymentParametersId.paymentPeriod}"/>
                <p:outputLabel value="Payment Day Of Month" /> <h:outputText value="#{customersController.selected.paymentParametersId.paymentPeriodDayOfMonth}"/>
                <p:outputLabel value="Payment Day of Week" /> <h:outputText value="#{customersController.selected.paymentParametersId.paymentPeriodDayOfWeek}"/>
                <p:outputLabel value="Successful Payments" /> <h:outputText value="#{customersController.selected.paymentParametersId.totalPaymentsSuccessful}"/>
                <p:outputLabel value="Amount Paid" /> <h:outputText value="#{customersController.selected.paymentParametersId.totalPaymentsSuccessfulAmount}"><f:convertNumber type="currency" currencySymbol="$" locale="au-AU" />
                </h:outputText>
                <p:outputLabel value="Failed Payments" /> <h:outputText value="#{customersController.selected.paymentParametersId.totalPaymentsFailed}"/>
                <p:outputLabel value="Failed Amount" /> <h:outputText value="#{customersController.selected.paymentParametersId.totalPaymentsFailedAmount}"><f:convertNumber type="currency" currencySymbol="$" locale="au-AU" />
                </h:outputText>
                <p:outputLabel value="Send Expired Card SMS" /> <h:outputText value="#{customersController.selected.paymentParametersId.smsExpiredCard}"/>
                <p:outputLabel value="Send Failed Payment SMS" /> <h:outputText value="#{customersController.selected.paymentParametersId.smsFailedNotification}"/>
                <p:outputLabel value="Send Payment Reminder SMS" /> <h:outputText value="#{customersController.selected.paymentParametersId.smsPaymentReminder}"/>
                <p:outputLabel value="Last Successful Payment" /> <h:outputText value="#{customersController.selected.paymentParametersId.lastSuccessfulScheduledPayment.debitDate}"/>
                <p:outputLabel value="Next Scheduled Payment" /> <h:outputText value="#{customersController.selected.paymentParametersId.nextScheduledPayment.debitDate}"/>

            </p:panelGrid>
        </p:panel>
        <p:panel id="paymentsTablePanel" collapsed="true" toggleable="true" header="All Payments - Latest response from the Payment Gateway" rendered="#{ezidebit.paymentsList != null and ezidebit.theCustomerProvisionedInThePaymentGateway == true}"> 
            <p:dataTable  id="paymentsTable"
                          value="#{ezidebit.paymentsList}" 
                          filteredValue="#{ezidebit.paymentsListFilteredItems}"  
                          widgetVar="paymentsListControllerTable"
                          var="pay"  
                          paginator="true" rows="15"  
                          paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"  
                          rowsPerPageTemplate="5,10,15,20,25,50,100" >
                <f:facet name="header">
                    <p:outputPanel>
                        <p:outputPanel>
                            <!--<h:outputText  rendered="#{ezidebit.paymentsListFilteredItems != null}" value="#{ezidebit.paymentsListFilteredItems.size} Records Found"/>
                             
                            <h:outputText  rendered="#{ezidebit.paymentsList != null}" value="#{ezidebit.paymentsList.size} Records Found"/>-->

                        </p:outputPanel> 

                        <h:outputText value="Payments" />

                    </p:outputPanel>
                </f:facet>
                <p:column sortBy="#{pay.paymentID.value}" filterBy="#{pay.paymentID.value}" headerText="#{configMapController.getKey('ListPaymentsTitle_paymentID')}"   >
                    <h:outputText value="#{pay.paymentID.value}"/>
                </p:column>

                <p:column sortBy="#{pay.customerName.value}" filterBy="#{pay.customerName.value}" headerText="#{configMapController.getKey('ListPaymentsTitle_customerName')}"   >
                    <h:outputText value="#{pay.customerName.value}"/>
                </p:column>
                <p:column sortBy="#{pay.paymentReference.value}" filterBy="#{pay.paymentReference.value}" headerText="#{configMapController.getKey('ListPaymentsTitle_paymentReference')}"   >
                    <h:outputText value="#{pay.paymentReference.value}"/>
                </p:column>
                <p:column sortBy="#{pay.paymentAmount}" filterBy="#{pay.paymentAmount}" headerText="#{configMapController.getKey('ListPaymentsTitle_paymentAmount')}"   >
                    <h:outputText value="#{pay.paymentAmount}">
                        <f:convertNumber type="currency" currencySymbol="$" locale="au-AU" />
                    </h:outputText>
                </p:column>
                <p:column sortBy="#{pay.paymentStatus.value}" filterBy="#{pay.paymentStatus.value}" headerText="#{configMapController.getKey('ListPaymentsTitle_paymentStatus')}"   >
                    <h:outputText  rendered="#{pay.paymentStatus.value == 'W'}"  value="Waiting"/>
                    <h:outputText  rendered="#{pay.paymentStatus.value == 'P'}"  value="Pending"/>
                    <h:outputText  rendered="#{pay.paymentStatus.value == 'S'}"  value="Successful"/>
                    <h:outputText  rendered="#{pay.paymentStatus.value == 'D'}"  value="Dis.Insufficient Funds"/>
                    <h:outputText  rendered="#{pay.paymentStatus.value == 'F'}"  value="Dishonoured"/>
                    <h:outputText  rendered="#{pay.paymentStatus.value == 'X'}"  value="Deleted In PGW"/>
                </p:column>
                <p:column sortBy="#{pay.debitDate.value.toGregorianCalendar().time}" filterBy="#{pay.debitDate.value.toGregorianCalendar().time}" headerText="#{configMapController.getKey('ListPaymentsTitle_debitDate')}"   >
                    <h:outputText value="#{pay.debitDate.value.toGregorianCalendar().time}">
                        <f:convertDateTime pattern="dd MMM yyyy" />
                    </h:outputText>
                </p:column>
            </p:dataTable>

        </p:panel>

        <p:panel id="scheduledPaymentsTablePanel"  collapsed="true" toggleable="true"  header="Scheduled Payments - Latest response from the Payment Gateway" rendered="#{ezidebit.scheduledPaymentsList != null and ezidebit.theCustomerProvisionedInThePaymentGateway == true}">
            <p:dataTable id="scheduledPaymentsTable"
                         selectionMode="single"
                         selection="#{ezidebit.selectedScheduledPayment}" 
                         value="#{ezidebit.scheduledPaymentsList}" 
                         filteredValue="#{ezidebit.scheduledPaymentsListFilteredItems}" 
                         rowKey="#{payment.paymentReference}"
                         widgetVar="scheduledPaymentsListControllerTable" 
                         var="payment"  
                         paginator="true" rows="15"  
                         paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"  
                         rowsPerPageTemplate="5,10,15,20,25,50,100" >
                <f:facet name="header">
                    <p:outputPanel>
                        <p:outputPanel>
                            <!--
                            <h:outputText  rendered="#{ezidebit.scheduledPaymentsListFilteredItems != null}" value="#{ezidebit.scheduledPaymentsListFilteredItems.size} Records Found"/>
                           
                               
                            <h:outputText  rendered="#{ezidebit.scheduledPaymentsList != null}" value="#{ezidebit.scheduledPaymentsList.size} Records Found"/> -->

                        </p:outputPanel> 

                        <h:outputText value="Scheduled Payments" />

                    </p:outputPanel>
                </f:facet>



                <p:column sortBy="#{payment.yourGeneralReference.value}" filterBy="#{payment.yourGeneralReference.value}" headerText="#{configMapController.getKey('ListPaymentsTitle_customerName')}"   >
                    <h:outputText value="#{payment.yourGeneralReference.value}"/>
                </p:column>
                <p:column sortBy="#{payment.yourSystemReference.value}" filterBy="#{payment.yourSystemReference.value}" headerText="#{configMapController.getKey('ListPaymentsTitle_customerName')}"   >
                    <h:outputText value="#{payment.yourSystemReference.value}"/>
                </p:column>
                <p:column sortBy="#{payment.paymentReference.value}" filterBy="#{payment.paymentReference.value}" headerText="#{configMapController.getKey('ListPaymentsTitle_paymentReference')}"   >                                 
                    <h:outputText value="#{payment.paymentReference.value}"/>
                </p:column>
                <p:column sortBy="#{payment.paymentAmount}" filterBy="#{payment.paymentAmount}" headerText="#{configMapController.getKey('ListPaymentsTitle_paymentAmount')}"   >
                    <h:outputText value="#{payment.paymentAmount}">
                        <f:convertNumber type="currency" currencySymbol="$" locale="au-AU" />
                    </h:outputText>
                </p:column>
                <p:column sortBy="#{payment.paymentDate.toGregorianCalendar().time}" filterBy="#{payment.paymentDate.toGregorianCalendar().time}" headerText="#{configMapController.getKey('ListPaymentsTitle_debitDate')}"   >
                    <h:outputText value="#{payment.paymentDate.toGregorianCalendar().time}" >
                        <f:convertDateTime pattern="dd MMM yyyy" />
                    </h:outputText>
                </p:column>
                <p:column sortBy="#{payment.isManuallyAddedPayment()}" filterBy="#{payment.isManuallyAddedPayment()}" headerText="#{configMapController.getKey('ListPaymentsTitle_manualPayment')}"   >
                    <h:outputText rendered="#{payment.isManuallyAddedPayment()}" value="Manual"/>
                    <h:outputText rendered="#{!payment.isManuallyAddedPayment()}" value="Auto"/>
                </p:column>

            </p:dataTable>
        </p:panel>
        <p:panel id="ezidebitCustomerDetailsPanel" collapsed="true" toggleable="true" rendered="#{ezidebit.currentCustomerDetails != null }" header="Customer Record in EziDebit">
            <p:panelGrid columns="2" style="width:100%">
                <p:outputLabel value="Customer Name:" /> <h:outputText value="#{ezidebit.currentCustomerDetails.customerFirstName.value} #{ezidebit.currentCustomerDetails.customerName.value}"/>
                <p:outputLabel value="Customer Address:" /> <h:outputText value="#{ezidebit.currentCustomerDetails.addressLine2.value} #{ezidebit.currentCustomerDetails.addressLine1.value}, #{ezidebit.currentCustomerDetails.addressSuburb.value} #{ezidebit.currentCustomerDetails.addressState.value} #{ezidebit.currentCustomerDetails.addressPostCode.value}"/>
                <p:outputLabel value="Contract Start:" /> <h:outputText value="#{ezidebit.currentCustomerDetails.contractStartDate.value}"/>
                <p:outputLabel value="Email Address:" /> <h:outputText value="#{ezidebit.currentCustomerDetails.email.value}"/>
                <p:outputLabel value="Mobile Phone:" /> <h:outputText value="#{ezidebit.currentCustomerDetails.mobilePhone.value}"/>
                <p:outputLabel value="Ezidebit ID:" /> <h:outputText value="#{ezidebit.currentCustomerDetails.ezidebitCustomerID.value}"/>
                <p:outputLabel value="General  ID:" /> <h:outputText value="#{ezidebit.currentCustomerDetails.yourGeneralReference.value}"/>
                <p:outputLabel value="System   ID:" /> <h:outputText value="#{ezidebit.currentCustomerDetails.yourSystemReference.value}"/>
                <p:outputLabel value="Status:" /> <h:outputText value="#{ezidebit.currentCustomerDetails.statusDescription.value}"/>
                <p:outputLabel value="Payment Method:" /> <h:outputText value="#{ezidebit.currentCustomerDetails.paymentMethod.value}"/>
                <p:outputLabel value="Payment Period" /> <h:outputText value="#{ezidebit.currentCustomerDetails.paymentPeriod.value}"/>
                <p:outputLabel value="Payment Day Of Month" /> <h:outputText value="#{ezidebit.currentCustomerDetails.paymentPeriodDayOfMonth.value}"/>
                <p:outputLabel value="Payment Day of Week" /> <h:outputText value="#{ezidebit.currentCustomerDetails.paymentPeriodDayOfWeek.value}"/>
                <p:outputLabel value="Successful Payments" /> <h:outputText value="#{ezidebit.currentCustomerDetails.totalPaymentsSuccessful}"/>
                <p:outputLabel value="Amount Paid" /> <h:outputText value="#{ezidebit.currentCustomerDetails.totalPaymentsSuccessfulAmount}"/>
                <p:outputLabel value="Failed Payments" /> <h:outputText value="#{ezidebit.currentCustomerDetails.totalPaymentsFailed}"/>
                <p:outputLabel value="Failed Amount" /> <h:outputText value="#{ezidebit.currentCustomerDetails.totalPaymentsFailedAmount}"/>
                <p:outputLabel value="Send Expired Card SMS" /> <h:outputText value="#{ezidebit.currentCustomerDetails.smsExpiredCard.value}"/>
                <p:outputLabel value="Send Failed Payment SMS" /> <h:outputText value="#{ezidebit.currentCustomerDetails.smsFailedNotification.value}"/>
                <p:outputLabel value="Send Payment Reminder SMS" /> <h:outputText value="#{ezidebit.currentCustomerDetails.smsPaymentReminder.value}"/>

            </p:panelGrid>
        </p:panel>
      <!--  <p:remoteCommand name="taskCompleted"   actionListener="#{ezidebit.remoteCommandListener}"  />-->
    </h:form> 

</ui:composition>
