
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                >

    <p:dialog id="SuppliersEditDlg" widgetVar="SuppliersEditDialog" modal="true" resizable="false" appendTo="@(body)" header="#{configMapController.getKey('EditSuppliersTitle')}">
        <h:form id="SuppliersEditForm">
            <h:panelGroup id="display">
                <p:panelGrid columns="2" rendered="#{suppliersController.selected != null}">
                    <h:outputLabel value="#{configMapController.getKey('EditSuppliersLabel_id')}" for="id" />
                    <h:inputText id="id"  value="#{suppliersController.selected.id}" title="#{configMapController.getKey('EditSuppliersTitle_id')}" required="true" requiredMessage="#{configMapController.getKey('EditSuppliersRequiredMessage_id')}"/>
                    <h:outputLabel value="#{configMapController.getKey('EditSuppliersLabel_supplierName')}" for="supplierName" />
                    <h:inputText id="supplierName"  value="#{suppliersController.selected.supplierName}" title="#{configMapController.getKey('EditSuppliersTitle_supplierName')}" />
                    <h:outputLabel value="#{configMapController.getKey('EditSuppliersLabel_description')}" for="description" />
                    <h:inputTextarea rows="4" cols="30" id="description" value="#{suppliersController.selected.description}" title="#{configMapController.getKey('EditSuppliersTitle_description')}" />
                    <h:outputLabel value="#{configMapController.getKey('EditSuppliersLabel_supplierCompanyNumber')}" for="supplierCompanyNumber" />
                    <h:inputText id="supplierCompanyNumber"  value="#{suppliersController.selected.supplierCompanyNumber}" title="#{configMapController.getKey('EditSuppliersTitle_supplierCompanyNumber')}" />
                    <h:outputLabel value="#{configMapController.getKey('EditSuppliersLabel_supplierCompanyNumberType')}" for="supplierCompanyNumberType" />
                    <h:inputText id="supplierCompanyNumberType"  value="#{suppliersController.selected.supplierCompanyNumberType}" title="#{configMapController.getKey('EditSuppliersTitle_supplierCompanyNumberType')}" />
                </p:panelGrid>
                <p:commandButton actionListener="#{suppliersController.update}" value="#{configMapController.getKey('Save')}" update="display,:SuppliersListForm:datalist,:growl" oncomplete="handleSubmit(args, 'SuppliersEditDialog');PF('suppliersControllerTable').filter()"/>
                <p:commandButton value="#{configMapController.getKey('Cancel')}" onclick="PF('SuppliersEditDialog').hide()"/>
            </h:panelGroup>
        </h:form>


        <h:form id="carForm">
            <p:fieldset id="availableCarsField" legend="Available Session Types">
                <p:dataGrid id="availableCars" var="sessionType" value="#{suppliersController.sessionTypesArray}" columns="3">
                    <p:panel id="pnl" header="#{sessionType.name}" style="text-align:center">
                        <h:outputText value="#{sessionType.description}" title="#{configMapController.getKey('ViewSessionTypesTitle_description')}"/>
                    </p:panel>
                    <p:draggable for="pnl" revert="true" handle=".ui-panel-titlebar" stack=".ui-panel"/>
                </p:dataGrid>
            </p:fieldset>
            <ui:repeat value="#{suppliersController.selected.contractorRatesCollection}" var="contractorRate">
                <p:fieldset id="selectedCars#{contractorRate.id}" legend="Rate" style="margin-top:20px">
                    <p:outputPanel id="dropArea">
                        <h:outputText value="!!!Drop here!!!" rendered="#{empty contractorRate.contractorRateToTaskMapCollection}" style="font-size:24px;" />
                        <p:dataTable id="selectedCarsTable" var="sessionType" value="#{contractorRate.contractorRateToTaskMapCollection}" rendered="#{not empty contractorRate.contractorRateToTaskMapCollection}">
                            <p:column headerText="Id">
                                <h:outputText value="#{sessionType.id}" />
                            </p:column>

                            <p:column headerText="Year">
                                <h:outputText value="#{sessionType.name}" />
                            </p:column>

                            <p:column headerText="Brand">
                                <h:outputText value="#{sessionType.description}" />
                            </p:column>

                           
                        </p:dataTable>
                    </p:outputPanel>
                </p:fieldset>

                <p:droppable for="selectedCars#{contractorRate.id}" tolerance="touch" activeStyleClass="ui-state-highlight" datasource="availableCars" onDrop="handleDrop">
                    <p:ajax listener="#{suppliersController.onSessionTypeDrop}" update="dropArea availableCars" />
                    <f:setPropertyActionListener value="#{contractorRate}" target="#{suppliersController.selectedContractorRate}" />
                </p:droppable>
            </ui:repeat>

        </h:form>
    </p:dialog>

</ui:composition>

