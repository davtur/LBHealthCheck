<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:p="http://primefaces.org/ui"
      xmlns:pm="http://primefaces.org/mobile">

    <f:view renderKitId="PRIMEFACES_MOBILE" />

    <h:head>
    </h:head>

    <h:body>
        <pm:page id="mobileLogin"  >
            <!-- Main View  -->

            <pm:header title="Pure Fitness Manly" swatch="b" />
            <pm:content >  
                <f:metadata>
                    <f:event type="preRenderView" listener="#{loginBean.checkAlreadyLoggedin}" />
                </f:metadata>
                <h:form id="mobileLoginForm">  
                    <p:growl id="growl" autoUpdate="true" showDetail="true"/>
                    <h3>Login with Facebook</h3>

                    <p:button value="Facebook Connect" href="#{facebookLoginBean.facebookUrlAuth}" />
                    <br/><br/>
                    <p:outputLabel value="#{facebookLoginBean.userFromSession}"></p:outputLabel>

                    <h3 >Or use your PFM account</h3>
                    
                    <pm:field>
                        <p:outputLabel value="Username"></p:outputLabel>
                        <p:inputText id="usernameInput" value="#{loginBean.username}" required="true" requiredMessage="Please enter your username"/>
                    </pm:field>
                    
                    <pm:field>
                        <p:outputLabel value="Password"></p:outputLabel>
                        <h:inputSecret id="passwordInput" value="#{loginBean.password}"  required="true" requiredMessage="Please enter your password" />
                    </pm:field>
                    
                    <br />
                    <p:commandButton value="Login" ajax="false"
                                     action="#{loginBean.login}"  update=":growl"/> 
                    <p:commandButton value="Reset Password" ajax="false"
                                     action="#{loginBean.resetPassword}" update=":growl"/>
                </h:form>



            </pm:content>

        </pm:page>
    </h:body>
</html>
